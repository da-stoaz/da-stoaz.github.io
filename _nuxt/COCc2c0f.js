import{_ as dt}from"./JPTxK4B8.js";import{b as We,_ as at,u as Ne,a as mt}from"./Dt7LU2GS.js";import Me from"./v14wUJ7k.js";import He from"./CBwK3qgQ.js";import{d as ve,n as Te,r as H,x as Be,q as Ie,c as le,o as y,a as n,w as m,f as l,g as i,j as U,e as A,i as z,t as x,s as xe,k as pe,A as Pe,B as Fe,C as ft,l as pt,D as ct,u as ht,m as gt,F as nt,h as _t,v as vt}from"./DqA0wvgn.js";import it from"./Nlcgn0cH.js";import Xe from"./CJU-G3S3.js";import he from"./Dq60U7H_.js";import Ve from"./CbAtA9qB.js";import Ue from"./BL4dKXUN.js";import rt from"./D64xhKuW.js";import ze from"./h23Egmxw.js";import Ye from"./Cb24HZDY.js";import Ge from"./Vjg67_ig.js";import Ke from"./Dq2NiRLV.js";import{a as Ze}from"./iBF5vbor.js";import{u as Le}from"./BPKLwf0D.js";import{u as Ee}from"./BFl8g0lt.js";import{u as Re,s as bt}from"./BAj6X1XV.js";import ot from"./ChmBoeTK.js";import yt from"./e59naxw4.js";import{u as Qe}from"./CWY8yeRe.js";import wt from"./D52XDk9D.js";import xt from"./B-81luDh.js";import kt from"./BE6v3yOc.js";import St from"./yzZ_7aO7.js";import Vt from"./CruGe7-4.js";import Tt from"./DGho4Kkx.js";import{u as Ct}from"./DlM3upmM.js";import"./CGmoPu9p.js";import"./xJh7gdIs.js";import"./CIEVKKL1.js";import"./CrqMR_Gz.js";import"./B3N0Dfa_.js";import"./X7vmODOq.js";import"./D59xopTu.js";import"./Fiz1UT9X.js";import"./DwqQTTJx.js";import"./Cl6nUjVB.js";import"./B6SoegvQ.js";import"./BuP_ugxb.js";import"./CRropaqv.js";import"./Dwe5DX2x.js";import"./92YlIw8Z.js";import"./BnCsyjQa.js";import"./DLmmK4TJ.js";import"./xWDfZRNS.js";import"./Ct1S-YFo.js";import"./NPLl8jsO.js";import"./CVaysz5l.js";import"./C_LOnxQR.js";import"./QJzStsYb.js";import"./H93Q_ufk.js";import"./DRGOXiAK.js";import"./DgKyQvjI.js";import"./BWl5T0yp.js";const Ot={userId:null,firstname:"",lastname:"",dateOfBirth:null,placeOfBirth:"",street:"",house:"",plz:null,place:"",team:"",phone:"",mail:"",disabled:null},Bt={teamName:"",type:"",needFields:1,trainer:null,coTrainer:null,disabled:null},Ut={userId:null,firstname:"",lastname:"",dateOfBirth:null,placeOfBirth:"",street:"",house:"",plz:null,place:"",mail:"",phone:"",disabled:null},zt={uuid:null,username:"",email:"",password:"",role:"",trainer:null},qe=X=>/^(\+?[1-9]\d{1,2})?\s?(0?\d{3,4}[\/\s]?\d{3,5}[\s]?\d{0,5})$/.test(X),$e=X=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(X),Et={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Dt={class:"flex flex-col gap-1 w-full"},At={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},It={class:"flex flex-col gap-1 w-full"},Ft={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Rt={class:"flex flex-col gap-1 w-full"},$t={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Nt={class:"flex flex-col gap-1 w-full"},Mt={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Pt={class:"flex flex-col gap-1 w-full"},Lt={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},jt={class:"flex flex-col gap-1 w-full"},qt={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Wt={class:"flex flex-col gap-1 w-full"},Ht={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Gt={class:"flex flex-col gap-1 w-full"},Kt={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Zt={class:"flex flex-col gap-1 w-full"},Jt={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Qt={class:"flex flex-col gap-1 w-full"},Xt={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Yt={class:"flex flex-col gap-1 w-full"},es={class:"flex justify-end gap-4 mt-4"},ts=ve({__name:"PlayerDialog",props:{player:{},teams:{},isVisible:{type:Boolean},isUpdate:{type:Boolean}},emits:["update:isVisible"],setup(X,{emit:E}){const O=X,v=E,N=Te({get:()=>O.isVisible,set:d=>v("update:isVisible",d)}),C=H(!1),T=We(),V=Be(),k=O.isUpdate&&O.player?O.player:Ot,r=H({...k}),f=({values:d})=>{const a={};return d.firstname||(a.firstname=[{message:"Vorname ist erforderlich"}]),d.lastname||(a.lastname=[{message:"Nachname ist erforderlich"}]),d.dateOfBirth||(a.dateOfBirth=[{message:"Geburtsdatum ist erforderlich"}]),d.placeOfBirth||(a.placeOfBirth=[{message:"Geburtsort ist erforderlich"}]),d.street||(a.street=[{message:"Straße ist erforderlich"}]),d.house||(a.house=[{message:"Hausnummer ist erforderlich"}]),d.place||(a.place=[{message:"Wohnort ist erforderlich"}]),d.team||(a.team=[{message:"Mannschaft ist erforderlich"}]),!d.mail&&!qe(d.phone)&&(a.mail=[{message:"Email ist erforderlich"}]),!d.phone&&!$e(d.mail)&&(a.phone=[{message:"Telefonnummer ist erforderlich"}]),d.phone&&!qe(d.phone)&&(a.phone=[{message:"Ungültige Telefonnummer"}]),d.mail&&!$e(d.mail)&&(a.mail=[{message:"Ungültige Email Adresse"}]),d.plz||(a.plz=[{message:"Postleitzahl ist erforderlich"}]),{errors:Object.keys(a).length?a:null}},I=async({valid:d})=>{if(!d){V.add({severity:"error",summary:"Bitte überprüfen Sie ihre Eingaben.",life:3e3});return}if(C.value=!0,!O.isUpdate)await T.addPlayer(r.value)&&(v("update:isVisible",!1),S());else{if(!r.value.userId){V.add({severity:"error",summary:"Fehler",detail:"UserID fehlt in updatePlayer()",life:3e3});return}await T.updatePlayer(r.value)&&(v("update:isVisible",!1),S()),C.value=!1}};Ie(()=>O.player,d=>{Object.assign(r.value,d||k)},{immediate:!0});const S=()=>{Object.assign(r.value,k)};return(d,a)=>{const p=Ve,o=he,b=at,W=Xe,G=it,g=xe,F=He,Q=Me;return y(),le("div",null,[n(Q,{visible:l(N),"onUpdate:visible":a[12]||(a[12]=_=>pe(N)?N.value=_:null),modal:"",header:d.isUpdate?"Bestehenden Spieler bearbeiten":"Neuen Spieler anlegen",class:"w-[95vw] max-w-2xl"},{default:m(()=>[n(F,{initialValues:l(r),resolver:f,onSubmit:I,class:"flex w-full flex-col p-4"},{default:m(_=>{var e,s,u,t,c,D,L,R,ie,h,j,$;return[i("div",Et,[a[13]||(a[13]=i("label",{for:"firstname",class:"font-semibold sm:w-40"},"Vorname",-1)),i("div",Dt,[n(p,{name:"firstname",modelValue:l(r).firstname,"onUpdate:modelValue":a[0]||(a[0]=w=>l(r).firstname=w),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(e=_.firstname)!=null&&e.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.firstname.error)==null?void 0:w.message),1)]}),_:2},1024)):A("",!0)])]),i("div",At,[a[14]||(a[14]=i("label",{for:"lastname",class:"font-semibold sm:w-40"},"Nachname",-1)),i("div",It,[n(p,{name:"lastname",modelValue:l(r).lastname,"onUpdate:modelValue":a[1]||(a[1]=w=>l(r).lastname=w),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(s=_.lastname)!=null&&s.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.lastname.error)==null?void 0:w.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Ft,[a[15]||(a[15]=i("label",{for:"dateOfBirth",class:"font-semibold sm:w-40"},"Geburtsdatum",-1)),i("div",Rt,[n(b,{name:"dateOfBirth","iso-date-string":l(r).dateOfBirth,"onUpdate:isoDateString":a[2]||(a[2]=w=>l(r).dateOfBirth=w),customDefaultValue:l(r).dateOfBirth,"max-date":new Date,"min-date":new Date("1900-01-01")},null,8,["iso-date-string","customDefaultValue","max-date","min-date"]),(u=_.dateOfBirth)!=null&&u.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.dateOfBirth)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",$t,[a[16]||(a[16]=i("label",{for:"placeOfBirth",class:"font-semibold sm:w-40"},"Geburtsort",-1)),i("div",Nt,[n(p,{name:"placeOfBirth",modelValue:l(r).placeOfBirth,"onUpdate:modelValue":a[3]||(a[3]=w=>l(r).placeOfBirth=w),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(t=_.placeOfBirth)!=null&&t.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.placeOfBirth)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Mt,[a[17]||(a[17]=i("label",{for:"team",class:"font-semibold sm:w-40"},"Team",-1)),i("div",Pt,[n(W,{name:"team",modelValue:l(r).team,"onUpdate:modelValue":a[4]||(a[4]=w=>l(r).team=w),options:O.teams||[],optionLabel:"teamName",optionValue:"teamName",placeholder:"Mannschaft auswählen",class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue","options"]),(c=_.team)!=null&&c.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.team)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Lt,[a[18]||(a[18]=i("label",{for:"street",class:"font-semibold sm:w-40"},"Straße",-1)),i("div",jt,[n(p,{name:"street",class:"w-full flex-grow-0",modelValue:l(r).street,"onUpdate:modelValue":a[5]||(a[5]=w=>l(r).street=w),autocomplete:"off"},null,8,["modelValue"]),(D=_.street)!=null&&D.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.street)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",qt,[a[19]||(a[19]=i("label",{for:"street",class:"font-semibold sm:w-40 overflow-clip overflow-ellipsis"},"Hausnr. /Tür /Stiege",-1)),i("div",Wt,[n(p,{name:"house",class:"w-full flex-grow-0",modelValue:l(r).house,"onUpdate:modelValue":a[6]||(a[6]=w=>l(r).house=w),autocomplete:"off"},null,8,["modelValue"]),(L=_.house)!=null&&L.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.house)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Ht,[a[20]||(a[20]=i("label",{for:"plz",class:"font-semibold sm:w-40"},"Postleitzahl",-1)),i("div",Gt,[n(G,{name:"plz",useGrouping:!1,modelValue:l(r).plz,"onUpdate:modelValue":a[7]||(a[7]=w=>l(r).plz=w),invalid:(R=_.plz)==null?void 0:R.invalid,class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue","invalid"]),(ie=_.plz)!=null&&ie.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.plz)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Kt,[a[21]||(a[21]=i("label",{for:"place",class:"font-semibold sm:w-40"},"Wohnort",-1)),i("div",Zt,[n(p,{name:"place",modelValue:l(r).place,"onUpdate:modelValue":a[8]||(a[8]=w=>l(r).place=w),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(h=_.place)!=null&&h.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w;return[z(x((w=_.place)==null?void 0:w.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Jt,[a[22]||(a[22]=i("label",{for:"mail",class:"font-semibold sm:w-40"},"Email Adresse",-1)),i("div",Qt,[n(p,{name:"mail",modelValue:l(r).mail,"onUpdate:modelValue":a[9]||(a[9]=w=>l(r).mail=w),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(j=_.mail)!=null&&j.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w,M;return[z(x((M=(w=_.mail)==null?void 0:w.error)==null?void 0:M.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Xt,[a[23]||(a[23]=i("label",{for:"phone",class:"font-semibold sm:w-40"},"Telefonnummer",-1)),i("div",Yt,[n(p,{name:"phone",modelValue:l(r).phone,"onUpdate:modelValue":a[10]||(a[10]=w=>l(r).phone=w),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),($=_.phone)!=null&&$.invalid?(y(),U(o,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var w,M;return[z(x((M=(w=_.phone)==null?void 0:w.error)==null?void 0:M.message),1)]}),_:2},1024)):A("",!0)])]),i("div",es,[n(g,{type:"button",label:"Abbrechen",severity:"secondary",onClick:a[11]||(a[11]=w=>d.$emit("update:isVisible",!1))}),n(g,{type:"submit",loading:l(C),label:O.isUpdate?"Speichern":"Erstellen"},null,8,["loading","label"])])]}),_:1},8,["initialValues"])]),_:1},8,["visible","header"])])}}}),ss=Object.assign(ts,{__name:"ManagePlayerDialog"});function ls(X){return X&&X.__esModule&&Object.prototype.hasOwnProperty.call(X,"default")?X.default:X}var je={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var as=je.exports,lt;function ns(){return lt||(lt=1,function(X,E){((O,v)=>{X.exports=v()})(as,function O(){var v=typeof self<"u"?self:typeof window<"u"?window:v!==void 0?v:{},N,C=!v.document&&!!v.postMessage,T=v.IS_PAPA_WORKER||!1,V={},k=0,r={};function f(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var u=F(s);u.chunkSize=parseInt(u.chunkSize),s.step||s.chunk||(u.chunkSize=null),this._handle=new p(u),(this._handle.streamer=this)._config=u}).call(this,e),this.parseChunk=function(s,u){var t=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<t){let D=this._config.newline;D||(c=this._config.quoteChar||'"',D=this._handle.guessLineEndings(s,c)),s=[...s.split(D).slice(t)].join(D)}this.isFirstChunk&&_(this._config.beforeFirstChunk)&&(c=this._config.beforeFirstChunk(s))!==void 0&&(s=c),this.isFirstChunk=!1,this._halted=!1;var t=this._partialLine+s,c=(this._partialLine="",this._handle.parse(t,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=c.meta.cursor,t=(this._finished||(this._partialLine=t.substring(s-this._baseIndex),this._baseIndex=s),c&&c.data&&(this._rowCount+=c.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),T)v.postMessage({results:c,workerId:r.WORKER_ID,finished:t});else if(_(this._config.chunk)&&!u){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=c=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!t||!_(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),t||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(s){_(this._config.error)?this._config.error(s):T&&this._config.error&&v.postMessage({workerId:r.WORKER_ID,error:s,finished:!1})}}function I(e){var s;(e=e||{}).chunkSize||(e.chunkSize=r.RemoteChunkSize),f.call(this,e),this._nextChunk=C?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),C||(s.onload=Q(this._chunkLoaded,this),s.onerror=Q(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!C),this._config.downloadRequestHeaders){var u,t=this._config.downloadRequestHeaders;for(u in t)s.setRequestHeader(u,t[u])}var c;this._config.chunkSize&&(c=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+c));try{s.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}C&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(u=>(u=u.getResponseHeader("Content-Range"))!==null?parseInt(u.substring(u.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(u){u=s.statusText||u,this._sendError(new Error(u))}}function S(e){(e=e||{}).chunkSize||(e.chunkSize=r.LocalChunkSize),f.call(this,e);var s,u,t=typeof FileReader<"u";this.stream=function(c){this._input=c,u=c.slice||c.webkitSlice||c.mozSlice,t?((s=new FileReader).onload=Q(this._chunkLoaded,this),s.onerror=Q(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var c=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),c=u.call(c,this._start,D)),s.readAsText(c,this._config.encoding));t||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(c){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(c.target.result)},this._chunkError=function(){this._sendError(s.error)}}function d(e){var s;f.call(this,e=e||{}),this.stream=function(u){return s=u,this._nextChunk()},this._nextChunk=function(){var u,t;if(!this._finished)return u=this._config.chunkSize,s=u?(t=s.substring(0,u),s.substring(u)):(t=s,""),this._finished=!s,this.parseChunk(t)}}function a(e){f.call(this,e=e||{});var s=[],u=!0,t=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(c){this._input=c,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){t&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):u=!0},this._streamData=Q(function(c){try{s.push(typeof c=="string"?c:c.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(D){this._streamError(D)}},this),this._streamError=Q(function(c){this._streamCleanUp(),this._sendError(c)},this),this._streamEnd=Q(function(){this._streamCleanUp(),t=!0,this._streamData("")},this),this._streamCleanUp=Q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(e){var s,u,t,c,D=Math.pow(2,53),L=-D,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,j=0,$=0,w=!1,M=!1,K=[],B={data:[],errors:[],meta:{}};function oe(Z){return e.skipEmptyLines==="greedy"?Z.join("").trim()==="":Z.length===1&&Z[0].length===0}function re(){if(B&&t&&(ge("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),t=!1),e.skipEmptyLines&&(B.data=B.data.filter(function(P){return!oe(P)})),me()){let P=function(ne,ue){_(e.transformHeader)&&(ne=e.transformHeader(ne,ue)),K.push(ne)};if(B)if(Array.isArray(B.data[0])){for(var Z=0;me()&&Z<B.data.length;Z++)B.data[Z].forEach(P);B.data.splice(0,1)}else B.data.forEach(P)}function Y(P,ne){for(var ue=e.header?{}:[],ee=0;ee<P.length;ee++){var te=ee,J=P[ee],J=((_e,q)=>(se=>(e.dynamicTypingFunction&&e.dynamicTyping[se]===void 0&&(e.dynamicTyping[se]=e.dynamicTypingFunction(se)),(e.dynamicTyping[se]||e.dynamicTyping)===!0))(_e)?q==="true"||q==="TRUE"||q!=="false"&&q!=="FALSE"&&((se=>{if(R.test(se)&&(se=parseFloat(se),L<se&&se<D))return 1})(q)?parseFloat(q):ie.test(q)?new Date(q):q===""?null:q):q)(te=e.header?ee>=K.length?"__parsed_extra":K[ee]:te,J=e.transform?e.transform(J,te):J);te==="__parsed_extra"?(ue[te]=ue[te]||[],ue[te].push(J)):ue[te]=J}return e.header&&(ee>K.length?ge("FieldMismatch","TooManyFields","Too many fields: expected "+K.length+" fields but parsed "+ee,$+ne):ee<K.length&&ge("FieldMismatch","TooFewFields","Too few fields: expected "+K.length+" fields but parsed "+ee,$+ne)),ue}var ae;B&&(e.header||e.dynamicTyping||e.transform)&&(ae=1,!B.data.length||Array.isArray(B.data[0])?(B.data=B.data.map(Y),ae=B.data.length):B.data=Y(B.data,0),e.header&&B.meta&&(B.meta.fields=K),$+=ae)}function me(){return e.header&&K.length===0}function ge(Z,Y,ae,P){Z={type:Z,code:Y,message:ae},P!==void 0&&(Z.row=P),B.errors.push(Z)}_(e.step)&&(c=e.step,e.step=function(Z){B=Z,me()?re():(re(),B.data.length!==0&&(j+=Z.data.length,e.preview&&j>e.preview?u.abort():(B.data=B.data[0],c(B,h))))}),this.parse=function(Z,Y,ae){var P=e.quoteChar||'"',P=(e.newline||(e.newline=this.guessLineEndings(Z,P)),t=!1,e.delimiter?_(e.delimiter)&&(e.delimiter=e.delimiter(Z),B.meta.delimiter=e.delimiter):((P=((ne,ue,ee,te,J)=>{var _e,q,se,Se;J=J||[",","	","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var Ce=0;Ce<J.length;Ce++){for(var be,De=J[Ce],fe=0,ye=0,de=0,ce=(se=void 0,new b({comments:te,delimiter:De,newline:ue,preview:10}).parse(ne)),ke=0;ke<ce.data.length;ke++)ee&&oe(ce.data[ke])?de++:(be=ce.data[ke].length,ye+=be,se===void 0?se=be:0<be&&(fe+=Math.abs(be-se),se=be));0<ce.data.length&&(ye/=ce.data.length-de),(q===void 0||fe<=q)&&(Se===void 0||Se<ye)&&1.99<ye&&(q=fe,_e=De,Se=ye)}return{successful:!!(e.delimiter=_e),bestDelimiter:_e}})(Z,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=P.bestDelimiter:(t=!0,e.delimiter=r.DefaultDelimiter),B.meta.delimiter=e.delimiter),F(e));return e.preview&&e.header&&P.preview++,s=Z,u=new b(P),B=u.parse(s,Y,ae),re(),w?{meta:{paused:!0}}:B||{meta:{paused:!1}}},this.paused=function(){return w},this.pause=function(){w=!0,u.abort(),s=_(e.chunk)?"":s.substring(u.getCharIndex())},this.resume=function(){h.streamer._halted?(w=!1,h.streamer.parseChunk(s,!0)):setTimeout(h.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,u.abort(),B.meta.aborted=!0,_(e.complete)&&e.complete(B),s=""},this.guessLineEndings=function(ne,P){ne=ne.substring(0,1048576);var P=new RegExp(o(P)+"([^]*?)"+o(P),"gm"),ae=(ne=ne.replace(P,"")).split("\r"),P=ne.split(`
`),ne=1<P.length&&P[0].length<ae[0].length;if(ae.length===1||ne)return`
`;for(var ue=0,ee=0;ee<ae.length;ee++)ae[ee][0]===`
`&&ue++;return ue>=ae.length/2?`\r
`:"\r"}}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(e){var s=(e=e||{}).delimiter,u=e.newline,t=e.comments,c=e.step,D=e.preview,L=e.fastMode,R=null,ie=!1,h=e.quoteChar==null?'"':e.quoteChar,j=h;if(e.escapeChar!==void 0&&(j=e.escapeChar),(typeof s!="string"||-1<r.BAD_DELIMITERS.indexOf(s))&&(s=","),t===s)throw new Error("Comment character same as delimiter");t===!0?t="#":(typeof t!="string"||-1<r.BAD_DELIMITERS.indexOf(t))&&(t=!1),u!==`
`&&u!=="\r"&&u!==`\r
`&&(u=`
`);var $=0,w=!1;this.parse=function(M,K,B){if(typeof M!="string")throw new Error("Input must be a string");var oe=M.length,re=s.length,me=u.length,ge=t.length,Z=_(c),Y=[],ae=[],P=[],ne=$=0;if(!M)return fe();if(L||L!==!1&&M.indexOf(h)===-1){for(var ue=M.split(u),ee=0;ee<ue.length;ee++){if(P=ue[ee],$+=P.length,ee!==ue.length-1)$+=u.length;else if(B)return fe();if(!t||P.substring(0,ge)!==t){if(Z){if(Y=[],Se(P.split(s)),ye(),w)return fe()}else Se(P.split(s));if(D&&D<=ee)return Y=Y.slice(0,D),fe(!0)}}return fe()}for(var te=M.indexOf(s,$),J=M.indexOf(u,$),_e=new RegExp(o(j)+o(h),"g"),q=M.indexOf(h,$);;)if(M[$]===h)for(q=$,$++;;){if((q=M.indexOf(h,q+1))===-1)return B||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:$}),be();if(q===oe-1)return be(M.substring($,q).replace(_e,h));if(h===j&&M[q+1]===j)q++;else if(h===j||q===0||M[q-1]!==j){te!==-1&&te<q+1&&(te=M.indexOf(s,q+1));var se=Ce((J=J!==-1&&J<q+1?M.indexOf(u,q+1):J)===-1?te:Math.min(te,J));if(M.substr(q+1+se,re)===s){P.push(M.substring($,q).replace(_e,h)),M[$=q+1+se+re]!==h&&(q=M.indexOf(h,$)),te=M.indexOf(s,$),J=M.indexOf(u,$);break}if(se=Ce(J),M.substring(q+1+se,q+1+se+me)===u){if(P.push(M.substring($,q).replace(_e,h)),De(q+1+se+me),te=M.indexOf(s,$),q=M.indexOf(h,$),Z&&(ye(),w))return fe();if(D&&Y.length>=D)return fe(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:$}),q++}}else if(t&&P.length===0&&M.substring($,$+ge)===t){if(J===-1)return fe();$=J+me,J=M.indexOf(u,$),te=M.indexOf(s,$)}else if(te!==-1&&(te<J||J===-1))P.push(M.substring($,te)),$=te+re,te=M.indexOf(s,$);else{if(J===-1)break;if(P.push(M.substring($,J)),De(J+me),Z&&(ye(),w))return fe();if(D&&Y.length>=D)return fe(!0)}return be();function Se(de){Y.push(de),ne=$}function Ce(de){var ce=0;return ce=de!==-1&&(de=M.substring(q+1,de))&&de.trim()===""?de.length:ce}function be(de){return B||(de===void 0&&(de=M.substring($)),P.push(de),$=oe,Se(P),Z&&ye()),fe()}function De(de){$=de,Se(P),P=[],J=M.indexOf(u,$)}function fe(de){if(e.header&&!K&&Y.length&&!ie){var ce=Y[0],ke={},Je=new Set(ce);let tt=!1;for(let Oe=0;Oe<ce.length;Oe++){let we=ce[Oe];if(ke[we=_(e.transformHeader)?e.transformHeader(we,Oe):we]){let Ae,st=ke[we];for(;Ae=we+"_"+st,st++,Je.has(Ae););Je.add(Ae),ce[Oe]=Ae,ke[we]++,tt=!0,(R=R===null?{}:R)[Ae]=we}else ke[we]=1,ce[Oe]=we;Je.add(we)}tt&&console.warn("Duplicate headers found and renamed."),ie=!0}return{data:Y,errors:ae,meta:{delimiter:s,linebreak:u,aborted:w,truncated:!!de,cursor:ne+(K||0),renamedHeaders:R}}}function ye(){c(fe()),Y=[],ae=[]}},this.abort=function(){w=!0},this.getCharIndex=function(){return $}}function W(e){var s=e.data,u=V[s.workerId],t=!1;if(s.error)u.userError(s.error,s.file);else if(s.results&&s.results.data){var c={abort:function(){t=!0,G(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:g,resume:g};if(_(u.userStep)){for(var D=0;D<s.results.data.length&&(u.userStep({data:s.results.data[D],errors:s.results.errors,meta:s.results.meta},c),!t);D++);delete s.results}else _(u.userChunk)&&(u.userChunk(s.results,c,s.file),delete s.results)}s.finished&&!t&&G(s.workerId,s.results)}function G(e,s){var u=V[e];_(u.userComplete)&&u.userComplete(s),u.terminate(),delete V[e]}function g(){throw new Error("Not implemented.")}function F(e){if(typeof e!="object"||e===null)return e;var s,u=Array.isArray(e)?[]:{};for(s in e)u[s]=F(e[s]);return u}function Q(e,s){return function(){e.apply(s,arguments)}}function _(e){return typeof e=="function"}return r.parse=function(e,s){var u=(s=s||{}).dynamicTyping||!1;if(_(u)&&(s.dynamicTypingFunction=u,u={}),s.dynamicTyping=u,s.transform=!!_(s.transform)&&s.transform,!s.worker||!r.WORKERS_SUPPORTED)return u=null,r.NODE_STREAM_INPUT,typeof e=="string"?(e=(t=>t.charCodeAt(0)!==65279?t:t.slice(1))(e),u=new(s.download?I:d)(s)):e.readable===!0&&_(e.read)&&_(e.on)?u=new a(s):(v.File&&e instanceof File||e instanceof Object)&&(u=new S(s)),u.stream(e);(u=(()=>{var t;return!!r.WORKERS_SUPPORTED&&(t=(()=>{var c=v.URL||v.webkitURL||null,D=O.toString();return r.BLOB_URL||(r.BLOB_URL=c.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(t=new v.Worker(t)).onmessage=W,t.id=k++,V[t.id]=t)})()).userStep=s.step,u.userChunk=s.chunk,u.userComplete=s.complete,u.userError=s.error,s.step=_(s.step),s.chunk=_(s.chunk),s.complete=_(s.complete),s.error=_(s.error),delete s.worker,u.postMessage({input:e,config:s,workerId:u.id})},r.unparse=function(e,s){var u=!1,t=!0,c=",",D=`\r
`,L='"',R=L+L,ie=!1,h=null,j=!1,$=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||r.BAD_DELIMITERS.filter(function(K){return s.delimiter.indexOf(K)!==-1}).length||(c=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(u=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(ie=s.skipEmptyLines),typeof s.newline=="string"&&(D=s.newline),typeof s.quoteChar=="string"&&(L=s.quoteChar),typeof s.header=="boolean"&&(t=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");h=s.columns}s.escapeChar!==void 0&&(R=s.escapeChar+L),s.escapeFormulae instanceof RegExp?j=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(j=/^[=+\-@\t\r].*$/)}})(),new RegExp(o(L),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return w(null,e,ie);if(typeof e[0]=="object")return w(h||Object.keys(e[0]),e,ie)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||h),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),w(e.fields||[],e.data||[],ie);throw new Error("Unable to serialize unrecognized input");function w(K,B,oe){var re="",me=(typeof K=="string"&&(K=JSON.parse(K)),typeof B=="string"&&(B=JSON.parse(B)),Array.isArray(K)&&0<K.length),ge=!Array.isArray(B[0]);if(me&&t){for(var Z=0;Z<K.length;Z++)0<Z&&(re+=c),re+=M(K[Z],Z);0<B.length&&(re+=D)}for(var Y=0;Y<B.length;Y++){var ae=(me?K:B[Y]).length,P=!1,ne=me?Object.keys(B[Y]).length===0:B[Y].length===0;if(oe&&!me&&(P=oe==="greedy"?B[Y].join("").trim()==="":B[Y].length===1&&B[Y][0].length===0),oe==="greedy"&&me){for(var ue=[],ee=0;ee<ae;ee++){var te=ge?K[ee]:ee;ue.push(B[Y][te])}P=ue.join("").trim()===""}if(!P){for(var J=0;J<ae;J++){0<J&&!ne&&(re+=c);var _e=me&&ge?K[J]:J;re+=M(B[Y][_e],J)}Y<B.length-1&&(!oe||0<ae&&!ne)&&(re+=D)}}return re}function M(K,B){var oe,re;return K==null?"":K.constructor===Date?JSON.stringify(K).slice(1,25):(re=!1,j&&typeof K=="string"&&j.test(K)&&(K="'"+K,re=!0),oe=K.toString().replace($,R),(re=re||u===!0||typeof u=="function"&&u(K,B)||Array.isArray(u)&&u[B]||((me,ge)=>{for(var Z=0;Z<ge.length;Z++)if(-1<me.indexOf(ge[Z]))return!0;return!1})(oe,r.BAD_DELIMITERS)||-1<oe.indexOf(c)||oe.charAt(0)===" "||oe.charAt(oe.length-1)===" ")?L+oe+L:oe)}},r.RECORD_SEP="",r.UNIT_SEP="",r.BYTE_ORDER_MARK="\uFEFF",r.BAD_DELIMITERS=["\r",`
`,'"',r.BYTE_ORDER_MARK],r.WORKERS_SUPPORTED=!C&&!!v.Worker,r.NODE_STREAM_INPUT=1,r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=b,r.ParserHandle=p,r.NetworkStreamer=I,r.FileStreamer=S,r.StringStreamer=d,r.ReadableStreamStreamer=a,v.jQuery&&((N=v.jQuery).fn.parse=function(e){var s=e.config||{},u=[];return this.each(function(D){if(!(N(this).prop("tagName").toUpperCase()==="INPUT"&&N(this).attr("type").toLowerCase()==="file"&&v.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)u.push({file:this.files[L],inputElem:this,instanceConfig:N.extend({},s)})}),t(),this;function t(){if(u.length===0)_(e.complete)&&e.complete();else{var D,L,R,ie,h=u[0];if(_(e.before)){var j=e.before(h.file,h.inputElem);if(typeof j=="object"){if(j.action==="abort")return D="AbortError",L=h.file,R=h.inputElem,ie=j.reason,void(_(e.error)&&e.error({name:D},L,R,ie));if(j.action==="skip")return void c();typeof j.config=="object"&&(h.instanceConfig=N.extend(h.instanceConfig,j.config))}else if(j==="skip")return void c()}var $=h.instanceConfig.complete;h.instanceConfig.complete=function(w){_($)&&$(w,h.file,h.inputElem),c()},r.parse(h.file,h.instanceConfig)}}function c(){u.splice(0,1),t()}}),T&&(v.onmessage=function(e){e=e.data,r.WORKER_ID===void 0&&e&&(r.WORKER_ID=e.workerId),typeof e.input=="string"?v.postMessage({workerId:r.WORKER_ID,results:r.parse(e.input,e.config),finished:!0}):(v.File&&e.input instanceof File||e.input instanceof Object)&&(e=r.parse(e.input,e.config))&&v.postMessage({workerId:r.WORKER_ID,results:e,finished:!0})}),(I.prototype=Object.create(f.prototype)).constructor=I,(S.prototype=Object.create(f.prototype)).constructor=S,(d.prototype=Object.create(d.prototype)).constructor=d,(a.prototype=Object.create(f.prototype)).constructor=a,r})}(je)),je.exports}var is=ns();const et=ls(is),rs={class:"flex flex-col gap-3 md:p-2"},os={class:"w-full"},us={class:"flex flex-col lg:flex-row gap-3 w-full flex-wrap"},ds={class:"flex flex-col flex-shrink-0 sm:flex-row gap-2 w-auto"},ms={key:0},fs={key:1},ps={class:"flex gap-2"},cs=ve({__name:"PlayerTable",setup(X){const E=We(),O=Ne(),v=Le(),N=H({}),C=H({}),T=H(null),V=H(!1),k=H(!1),r=async p=>{N.value[p]=!0;const o=await E.getPlayerById(p);o&&(T.value=o,k.value=!0,V.value=!0),N.value[p]=!1},f=Pe(),I=(p,o)=>{f.require({target:p.currentTarget,message:"Wollen Sie den Spieler wirklich löschen?",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Abbrechen",severity:"secondary"},acceptProps:{severity:"danger",label:"Löschen"},accept:async()=>{C.value[o]=!0,await E.deletePlayer(o),C.value[o]=!1}})},S=H(),d=()=>{const p=E.players.map(g=>({Vorname:g.firstname,Nachname:g.lastname,Mannschaft:g.team||"",Geburtsdatum:g.dateOfBirth?new Date(g.dateOfBirth).toLocaleDateString():"",Wohnort:`${g.plz||""} ${g.place||""}`,Straße:`${g.street||""} ${g.house||""}`,Telefon:g.phone||"",Email:g.mail||""})),o=et.unparse(p,{delimiter:";"}),b=new Blob([o],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),G=URL.createObjectURL(b);W.setAttribute("href",G),W.setAttribute("download","Spielerübersicht.csv"),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W)},a=H({global:{value:null,matchMode:Fe.CONTAINS},dateOfBirth:{value:null,matchMode:Fe.DATE_IS}});return(p,o)=>{const b=ss,W=he,G=Ke,g=Ve,F=Ge,Q=Ye,_=xe,e=ze,s=rt,u=Ue;return y(),le("div",null,[n(b,{player:l(T),"onUpdate:player":o[0]||(o[0]=t=>pe(T)?T.value=t:null),teams:l(O).teams,"onUpdate:teams":o[1]||(o[1]=t=>l(O).teams=t),isVisible:l(V),"onUpdate:isVisible":o[2]||(o[2]=t=>pe(V)?V.value=t:null),isUpdate:l(k)},null,8,["player","teams","isVisible","isUpdate"]),n(u,{ref_key:"dt",ref:S,value:l(E).players,"data-key":"userId",scrollable:"",scrollHeight:"flex",class:"overflow-hidden rounded-xl",stripedRows:"","sort-mode":"multiple",removableSort:"",filterDisplay:"menu",filters:l(a),globalFilterFields:["firstname","lastname","team","dateOfBirth","plz","place"]},{empty:m(()=>[n(W,{severity:"info"},{default:m(()=>o[7]||(o[7]=[z("Es wurden keine Spieler gefunden.")])),_:1})]),header:m(()=>[i("div",rs,[i("div",os,[n(F,{class:"w-full flex-grow"},{default:m(()=>[n(G,null,{default:m(()=>o[8]||(o[8]=[i("i",{class:"pi pi-search"},null,-1)])),_:1}),n(g,{class:"w-full",modelValue:l(a).global.value,"onUpdate:modelValue":o[3]||(o[3]=t=>l(a).global.value=t),placeholder:"Suche nach Vorname, Nachname, Alter, PLZ, Ort"},null,8,["modelValue"])]),_:1})]),i("div",us,[n(Q,{class:"max-w-full flex-grow",modelValue:l(v).playerColumns,"onUpdate:modelValue":o[4]||(o[4]=t=>l(v).playerColumns=t),options:l(v).availablePlayerCols,optionLabel:"header",display:"chip",placeholder:"Weitere Informationen einblenden"},null,8,["modelValue","options"]),i("div",ds,[n(_,{class:"h-10 px-4 flex-grow",icon:"pi pi-external-link",label:"Exportieren",severity:"contrast",size:"small",onClick:o[5]||(o[5]=t=>d())}),n(_,{class:"h-10 px-4 flex-grow",icon:"pi pi-plus",label:"Neuer Spieler",size:"small",severity:"success",onClick:o[6]||(o[6]=t=>(T.value=null,V.value=!0,k.value=!1))})])])])]),default:m(()=>[n(e,{field:"name",header:"Name",sortField:"lastname",sortable:""},{body:m(({data:t})=>[z(x(t.firstname)+" "+x(t.lastname),1)]),_:1}),l(v).playerColumns.some(t=>t.field==="team")?(y(),U(e,{key:0,field:"team",header:"Mannschaft",sortable:"",sortField:"team",style:{"min-width":"8rem"}},{body:m(({data:t})=>[z(x(t.team),1)]),_:1})):A("",!0),l(v).playerColumns.some(t=>t.field==="dateOfBirth")?(y(),U(e,{key:1,field:"dateOfBirth",header:"Geburtsdatum",sortField:"dateOfBirth",sortable:""},{body:m(({data:t})=>[t.dateOfBirth?(y(),le("span",fs,x(new Date(t.dateOfBirth).toLocaleDateString())+" ("+x(l(Ze)(t.dateOfBirth))+"J.) ",1)):(y(),le("span",ms,"-"))]),filter:m(({filterModel:t,filterCallback:c})=>[n(g,{modelValue:t.value,"onUpdate:modelValue":D=>t.value=D,onChange:D=>c(),placeholder:"Nach Alter suchen"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):A("",!0),l(v).playerColumns.some(t=>t.field=="mail")?(y(),U(e,{key:2,name:"mail",header:"Email"},{body:m(({data:t})=>[z(x(t.mail),1)]),_:1})):A("",!0),l(v).playerColumns.some(t=>t.field=="phone")?(y(),U(e,{key:3,name:"phone",header:"Telefonnummer"},{body:m(({data:t})=>[z(x(t.phone),1)]),_:1})):A("",!0),l(v).playerColumns.some(t=>t.field==="place")?(y(),U(e,{key:4,field:"place",header:"Wohnort",sortable:"",sortField:"place",style:{"min-width":"8rem"}},{body:m(({data:t})=>[z(x(t.plz)+" "+x(t.place),1)]),_:1})):A("",!0),l(v).playerColumns.some(t=>t.field==="street")?(y(),U(e,{key:5,field:"street",header:"Straße",sortable:"",sortField:"street",style:{"min-width":"8rem"}},{body:m(({data:t})=>[z(x(t.street)+" "+x(t.house),1)]),_:1})):A("",!0),l(v).playerColumns.some(t=>t.field==="placeOfBirth")?(y(),U(e,{key:6,field:"placeOfbirth",header:"Geburtsort",style:{"min-width":"8rem"}},{body:m(({data:t})=>[z(x(t.placeOfBirth),1)]),_:1})):A("",!0),n(e,{field:"userId",header:"Aktionen",style:{width:"6rem"},"align-frozen":"right",frozen:l(v).frozenColumns},{body:m(({data:t})=>[n(s),i("div",ps,[n(_,{icon:"pi pi-pencil",severity:"info",loading:l(N)[t.userId],onClick:c=>r(t.userId),rounded:"","aria-label":"Edit"},null,8,["loading","onClick"]),n(_,{icon:"pi pi-trash",severity:"danger",rounded:"",onClick:c=>I(c,t.userId),loading:l(C)[t.userId],"aria-label":"Delete"},null,8,["onClick","loading"])])]),_:1},8,["frozen"])]),_:1},8,["value","filters"])])}}}),hs=Object.assign(cs,{__name:"ManagePlayerTable"}),gs={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},_s={class:"flex flex-col gap-1 w-full"},vs={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},bs={class:"flex flex-col gap-1 w-full"},ys={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},ws={class:"flex flex-col gap-1 w-full"},xs={class:"flex flex-row gap-2 align-middle"},ks={class:"flex justify-center items-center w-5"},Ss={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Vs={class:"flex flex-col gap-1 w-full"},Ts={class:"flex justify-end gap-2 mt-4"},Cs=ve({__name:"TeamDialog",props:{isVisible:{type:Boolean},isUpdate:{type:Boolean},teamName:{},team:{}},emits:["update:isVisible"],setup(X,{emit:E}){const O=Be(),v=Ne(),N=Ee(),C=X,T=E,V=Te({get:()=>C.isVisible,set:o=>T("update:isVisible",o)}),k=H(null),r=Bt,f=H({...r}),I=()=>{f.value.needFields?f.value.needFields<1?f.value.needFields=1:f.value.needFields++:f.value.needFields=1},S=()=>{f.value.needFields?f.value.needFields>4?f.value.needFields=3:f.value.needFields--:f.value.needFields=1},d=({values:o})=>{const b={};return o.teamName||(b.teamName=[{message:"Team Name ist erforderlich!"}]),o.teamName&&!C.isUpdate&&!v.isUniqueTeamName(o.teamName)&&(b.teamName=[{message:"Team Name muss eindeutig sein (bereits in Verwendung)!"}]),o.needFields||(b.needFields=[{message:"Anzahl der Felder ist erforderlich!"}]),o.type||(b.type=[{message:"Typ ist erforderlich!"}]),o.trainer||(b.trainer=[{message:"Trainer ist erforderlich!"}]),{errors:Object.keys(b).length?b:null}},a=async({valid:o})=>{if(!o){O.add({severity:"error",summary:"Bitte überprüfen Sie ihre Eingaben.",life:3e3});return}if(!C.isUpdate){await v.addTeam(f.value)&&(p(),V.value=!1);return}if(!k.value){O.add({severity:"error",summary:"Team Name ist erforderlich!",life:3e3});return}await v.updateTeam(k.value,f.value)&&(p(),V.value=!1)};Ie(()=>C.team,o=>{k.value=(o==null?void 0:o.teamName)||null,Object.assign(f.value,o||r)},{immediate:!0});const p=()=>{Object.assign(f.value,r)};return(o,b)=>{const W=Ve,G=xe,g=Xe,F=He,Q=Me;return y(),U(Q,{visible:l(V),"onUpdate:visible":b[6]||(b[6]=_=>pe(V)?V.value=_:null),modal:"",header:C.isUpdate?"Mannschaft bearbeiten":"Neue Mannschaft",class:"w-[95vw] max-w-2xl"},{default:m(()=>[n(F,{initialValues:l(f),resolver:d,onSubmit:a,class:"flex flex-col w-full p-4"},{default:m(_=>{var e,s,u,t;return[i("div",gs,[b[7]||(b[7]=i("label",{for:"teamName",class:"font-semibold sm:w-40"},"Teamname",-1)),i("div",_s,[n(W,{name:"teamName",modelValue:l(f).teamName,"onUpdate:modelValue":b[0]||(b[0]=c=>l(f).teamName=c),fluid:""},null,8,["modelValue"]),(e=_.teamName)!=null&&e.invalid?(y(),U(l(he),{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(_.teamName.error.message),1)]),_:2},1024)):A("",!0)])]),i("div",vs,[b[8]||(b[8]=i("label",{for:"type",class:"font-semibold sm:w-40"},"Typ",-1)),i("div",bs,[n(W,{name:"type",modelValue:l(f).type,"onUpdate:modelValue":b[1]||(b[1]=c=>l(f).type=c),fluid:""},null,8,["modelValue"]),(s=_.type)!=null&&s.invalid?(y(),U(l(he),{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(_.type.error.message),1)]),_:2},1024)):A("",!0)])]),i("div",ys,[b[9]||(b[9]=i("label",{for:"needFields",class:"font-semibold sm:w-40"},"Feldanzahl",-1)),i("div",ws,[i("div",xs,[n(G,{rounded:"",icon:"pi pi-minus",onClick:b[2]||(b[2]=c=>S()),disabled:l(f).needFields?l(f).needFields<2:!1},null,8,["disabled"]),i("div",ks,x(l(f).needFields),1),n(G,{rounded:"",icon:"pi pi-plus",onClick:b[3]||(b[3]=c=>I()),disabled:l(f).needFields?l(f).needFields>2:!1},null,8,["disabled"])]),(u=_.needFields)!=null&&u.invalid?(y(),U(l(he),{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(_.needFields.error.message),1)]),_:2},1024)):A("",!0)])]),i("div",Ss,[b[10]||(b[10]=i("label",{for:"trainer",class:"font-semibold sm:w-40"},"Trainer",-1)),i("div",Vs,[n(g,{name:"trainer",modelValue:l(f).trainer,"onUpdate:modelValue":b[4]||(b[4]=c=>l(f).trainer=c),options:l(N).mappedTrainers,optionLabel:"label",optionValue:"value",checkmark:""},null,8,["modelValue","options"]),(t=_.trainer)!=null&&t.invalid?(y(),U(l(he),{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(_.trainer.error.message),1)]),_:2},1024)):A("",!0)])]),i("div",Ts,[n(G,{type:"button",label:"Abbrechen",severity:"secondary",onClick:b[5]||(b[5]=c=>o.$emit("update:isVisible",!1))}),n(G,{type:"submit",label:C.isUpdate?"Speichern":"Erstellen"},null,8,["label"])])]}),_:1},8,["initialValues"])]),_:1},8,["visible","header"])}}}),Os=Object.assign(Cs,{__name:"ManageTeamDialog"}),Bs={class:"text-xl"},Us={class:"text-primary-500 italic"},zs={key:0},Es={key:1},Ds=ve({__name:"PlayerSelectDialog",props:{teamName:String,isVisible:Boolean},emits:["update:isVisible"],setup(X,{emit:E}){const O=X,v=E,N=We(),C=Ne(),T=Te({get:()=>O.isVisible,set:r=>v("update:isVisible",r)}),V=H([]),k=async()=>{V.value.length>0&&O.teamName&&await C.addPlayerToTeam(O.teamName,V.value)&&(T.value=!1)};return(r,f)=>{const I=he,S=ze,d=Ue,a=xe,p=Me;return y(),U(p,{visible:l(T),"onUpdate:visible":f[3]||(f[3]=o=>pe(T)?T.value=o:null),class:"w-[95vw] max-w-2xl",modal:""},{header:m(()=>[i("h3",Bs,[f[4]||(f[4]=z(" Spieler zu Mannschaft ")),i("span",Us,x(O.teamName),1),f[5]||(f[5]=z(" hinzufügen "))])]),footer:m(()=>[n(a,{type:"button",label:"Abbrechen",severity:"secondary",onClick:f[2]||(f[2]=o=>r.$emit("update:isVisible",!1))}),n(a,{type:"submit",label:"Hinzufügen",onClick:k})]),default:m(()=>[n(d,{selection:l(V),"onUpdate:selection":f[0]||(f[0]=o=>pe(V)?V.value=o:null),value:l(N).playersWithoutTeam,"onUpdate:value":f[1]||(f[1]=o=>l(N).playersWithoutTeam=o),"data-key":"userId",scrollable:"",scrollHeight:"flex",class:"overflow-hidden rounded-xl",stripedRows:"","state-storage":"local","state-key":"dt-state-playerSelect","sort-mode":"multiple"},{empty:m(()=>[n(I,{severity:"info"},{default:m(()=>f[6]||(f[6]=[z("Keine Spieler verfügbar")])),_:1})]),default:m(()=>[n(S,{selectionMode:"multiple",headerStyle:"width: 3rem"}),n(S,{field:"lastname",header:"Name"},{body:m(({data:o})=>[z(x(o.firstname)+" "+x(o.lastname),1)]),_:1}),n(S,{field:"dateOfBirth",header:"Alter"},{body:m(({data:o})=>[o.dateOfBirth?(y(),le("span",Es,x(l(Ze)(o.dateOfBirth))+" ("+x(o.dateOfBirth.toString().split("-")[0])+")",1)):(y(),le("span",zs,"-"))]),_:1})]),_:1},8,["selection","value"])]),_:1},8,["visible"])}}}),As=Object.assign(Ds,{__name:"ManagePlayerSelectDialog"}),Is={class:"flex flex-col sm:flex-row gap-2"},Fs={class:"word-break-all"},Rs={key:0},$s={key:1},Ns=ve({__name:"PlayerSelect",props:{teamName:{}},setup(X){const E=X,O=We(),v=Ne(),N=Te(()=>O.getPlayersByTeamName(E.teamName)),C=H({}),T=Te({get:()=>C.value[E.teamName]||[],set:f=>C.value[E.teamName]=f}),V=Pe(),k=async f=>{V.require({target:f.currentTarget,message:"Wollen Sie die ausgewählten Spieler wirklich vom Team entfernen?",header:"Löschen",rejectProps:{label:"Abbrechen",severity:"secondary"},acceptProps:{severity:"danger",label:"Löschen"},accept:async()=>{await v.removePlayerFromTeam(E.teamName,T.value),T.value=[]}})},r=H(!1);return(f,I)=>{const S=he,d=xe,a=ze,p=Ue,o=As;return y(),le("div",null,[n(p,{selection:l(T),"onUpdate:selection":I[1]||(I[1]=b=>pe(T)?T.value=b:null),value:l(N),"onUpdate:value":I[2]||(I[2]=b=>pe(N)?N.value=b:null),"data-key":"userId",scrollable:"",scrollHeight:"flex",stripedRows:"","sort-mode":"multiple"},{empty:m(()=>[n(S,{severity:"info"},{default:m(()=>I[4]||(I[4]=[z("In dieser Mannschaft sind keine Spieler.")])),_:1})]),header:m(()=>[i("div",Is,[n(d,{label:"Spieler Hinzufügen",size:"small",icon:"pi pi-plus",onClick:I[0]||(I[0]=b=>r.value=!0)}),n(d,{label:"Spieler entfernen",size:"small",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:k,disabled:!l(T)||l(T).length===0},null,8,["disabled"])])]),default:m(()=>[n(a,{selectionMode:"multiple",headerStyle:"width: 3rem"}),n(a,{field:"lastname",header:"Name"},{body:m(({data:b})=>[i("span",Fs,x(b.firstname)+" "+x(b.lastname),1)]),_:1}),n(a,{field:"dateOfBirth",header:"Alter"},{body:m(({data:b})=>[b.dateOfBirth?(y(),le("span",$s,x(l(Ze)(b.dateOfBirth))+" ("+x(b.dateOfBirth.toString().split("-")[0])+")",1)):(y(),le("span",Rs,"-"))]),_:1})]),_:1},8,["selection","value"]),n(o,{teamName:E.teamName,isVisible:l(r),"onUpdate:isVisible":I[3]||(I[3]=b=>pe(r)?r.value=b:null)},null,8,["teamName","isVisible"])])}}}),Ms=Object.assign(Ns,{__name:"ManagePlayerSelect"}),Ps={class:"flex flex-col gap-3 md:p-2"},Ls={class:"w-full"},js={class:"flex flex-col lg:flex-row gap-3 w-full flex-wrap"},qs={class:"flex flex-col flex-shrink-0 sm:flex-row gap-2 w-auto"},Ws={class:"flex gap-2"},Hs={class:"w-full m-0 !p-0"},Gs=ve({__name:"TeamTable",async setup(X){let E,O;const v=Ne();[E,O]=ft(()=>v.fetchTeams()),await E,O();const N=Ee(),C=Le(),T=H({}),V=H({}),k=H({}),r=H(!1),f=H(!1),I=H(null),S=H(null),d=async G=>{V.value[G]=!0,I.value=G;const g=await v.getTeamByName(G);g&&(S.value=g,f.value=!0,r.value=!0),V.value[G]=!1},a=Pe(),p=(G,g)=>{a.require({target:G.currentTarget,message:"Wollen Sie den Spieler wirklich löschen?",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Abbrechen",severity:"secondary"},acceptProps:{severity:"danger",label:"Löschen"},accept:async()=>{k.value[g]=!0,await v.deleteTeam(g),k.value[g]=!1}})},o=H(),b=()=>{const G=v.teams.map(e=>({Mannschaftsname:e.teamName,Typ:e.type,"Erforderte Felder":e.needFields,Trainer:e.trainer?N.trainerNameById(e.trainer):""})),g=et.unparse(G,{delimiter:";"}),F=new Blob([g],{type:"text/csv;charset=utf-8;"}),Q=document.createElement("a"),_=URL.createObjectURL(F);Q.setAttribute("href",_),Q.setAttribute("download","Mannschaftsübersicht.csv"),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)},W=H({global:{value:null,matchMode:Fe.CONTAINS}});return(G,g)=>{const F=Os,Q=he,_=Ke,e=Ve,s=Ge,u=Ye,t=xe,c=ze,D=Ms,L=Ue;return y(),le("div",null,[n(F,{isVisible:l(r),"onUpdate:isVisible":g[0]||(g[0]=R=>pe(r)?r.value=R:null),isUpdate:l(f),teamName:l(I),team:l(S)},null,8,["isVisible","isUpdate","teamName","team"]),n(L,{ref_key:"dt",ref:o,dataKey:"teamName",value:l(v).teams,"onUpdate:value":g[5]||(g[5]=R=>l(v).teams=R),expandedRows:l(T),"onUpdate:expandedRows":g[6]||(g[6]=R=>pe(T)?T.value=R:null),csvSeparator:";",exportFilename:"Teamübersicht",scrollable:"",stripedRows:"",sortMode:"multiple",removableSort:"",filters:l(W),globalFilterFields:["teamName","type","needFields","trainer"]},{empty:m(()=>[n(Q,{severity:"info"},{default:m(()=>g[7]||(g[7]=[z("Es wurden keine Teams gefunden.")])),_:1})]),header:m(()=>[i("div",Ps,[i("div",Ls,[n(s,{class:"w-full flex-grow"},{default:m(()=>[n(_,null,{default:m(()=>g[8]||(g[8]=[i("i",{class:"pi pi-search"},null,-1)])),_:1}),n(e,{class:"w-full truncate",modelValue:l(W).global.value,"onUpdate:modelValue":g[1]||(g[1]=R=>l(W).global.value=R),placeholder:"Suche nach Teamname, Typ, Erforderte Felder"},null,8,["modelValue"])]),_:1})]),i("div",js,[n(u,{class:"max-w-full flex-grow",optionLabel:"header",display:"chip",placeholder:"Weitere Informationen einblenden",modelValue:l(C).teamColumns,"onUpdate:modelValue":g[2]||(g[2]=R=>l(C).teamColumns=R),options:l(C).availableTeamCols},null,8,["modelValue","options"]),i("div",qs,[n(t,{class:"h-10 px-4 flex-grow",icon:"pi pi-external-link",label:"Exportieren",severity:"contrast",size:"small",onClick:g[3]||(g[3]=R=>b())}),n(t,{class:"h-10 px-4 flex-grow",icon:"pi pi-plus",label:"Neue Mannschaft",size:"small",severity:"success",onClick:g[4]||(g[4]=R=>{f.value=!1,r.value=!0,I.value="",S.value=null})})])])])]),expansion:m(R=>[i("div",Hs,[n(D,{teamName:R.data.teamName,class:"w-full"},null,8,["teamName"])])]),default:m(()=>[n(c,{expander:"",style:{width:"2rem"}}),n(c,{field:"teamName",header:"Mannschaftsname",sortable:"",expand:""}),l(C).teamColumns.some(R=>R.field==="type")?(y(),U(c,{key:0,field:"type",header:"Typ"})):A("",!0),l(C).teamColumns.some(R=>R.field==="needFields")?(y(),U(c,{key:1,field:"needFields",header:"Erforderte Felder",sortable:""})):A("",!0),l(C).teamColumns.some(R=>R.field==="trainer")?(y(),U(c,{key:2,field:"trainer",class:"hidden md:table-cell",header:"Trainer",sortable:""},{body:m(({data:R})=>[z(x(l(N).trainerNameById(R.trainer)),1)]),_:1})):A("",!0),n(c,{style:{width:"6rem"},field:"teamName",header:"Aktionen","align-frozen":"right",exportable:!1,frozen:l(C).frozenColumns},{body:m(({data:R})=>[i("div",Ws,[n(t,{icon:"pi pi-pencil",severity:"info",onClick:ie=>d(R.teamName),loading:l(V)[R.teamName],rounded:"","aria-label":"Edit Team"},null,8,["onClick","loading"]),n(t,{icon:"pi pi-trash",severity:"danger",rounded:"",onClick:ie=>p(ie,R.teamName),loading:l(k)[R.teamName],"aria-label":"Delete Team"},null,8,["onClick","loading"])])]),_:1},8,["frozen"])]),_:1},8,["value","expandedRows","filters"])])}}}),Ks=Object.assign(Gs,{__name:"ManageTeamTable"}),Zs={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Js={class:"flex flex-col gap-1 w-full"},Qs={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Xs={class:"flex flex-col gap-1 w-full"},Ys={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},el={class:"flex flex-col gap-1 w-full"},tl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},sl={class:"flex flex-col gap-1 w-full"},ll={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},al={class:"flex flex-col gap-1 w-full"},nl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},il={class:"flex flex-col gap-1 w-full"},rl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},ol={class:"flex flex-col gap-1 w-full"},ul={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},dl={class:"flex flex-col gap-1 w-full"},ml={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},fl={class:"flex flex-col gap-1 w-full"},pl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},cl={class:"flex flex-col gap-1 w-full"},hl={class:"flex justify-end gap-2 mt-4"},gl=ve({__name:"TrainerDialog",props:{trainer:{},isVisible:{type:Boolean},isUpdate:{type:Boolean}},emits:["update:isVisible"],setup(X,{emit:E}){const O=Be(),v=Ee(),N=E,C=X,T=Te({get:()=>C.isVisible,set:S=>N("update:isVisible",S)}),V=C.isUpdate&&C.trainer?C.trainer:Ut,k=H({...V}),r=({values:S})=>{const d={};return S.firstname||(d.firstname=[{message:"Vorname ist erforderlich"}]),S.lastname||(d.lastname=[{message:"Nachname ist erforderlich"}]),S.dateOfBirth||(d.dateOfBirth=[{message:"Geburtsdatum ist erforderlich"}]),S.placeOfBirth||(d.placeOfBirth=[{message:"Geburtsort ist erforderlich"}]),S.street||(d.street=[{message:"Straße ist erforderlich"}]),S.house||(d.house=[{message:"Hausnummer ist erforderlich"}]),S.place||(d.place=[{message:"Wohnort ist erforderlich"}]),!S.mail&&!qe(S.phone)&&(d.mail=[{message:"Email ist erforderlich"}]),!S.phone&&!$e(S.mail)&&(d.phone=[{message:"Telefonnummer ist erforderlich"}]),S.phone&&!qe(S.phone)&&(d.phone=[{message:"Ungültige Telefonnummer"}]),S.mail&&!$e(S.mail)&&(d.mail=[{message:"Ungültige Email Adresse"}]),S.plz||(d.plz=[{message:"Postleitzahl ist erforderlich"}]),{errors:Object.keys(d).length?d:null}},f=async({valid:S})=>{if(!S){O.add({severity:"error",summary:"Fehler",detail:"Bitte überprüfen Sie Ihre Eingaben",life:3e3});return}C.isUpdate?await v.updateTrainer(k.value)&&(I(),T.value=!1):await v.addTrainer(k.value)&&(I(),T.value=!1)};Ie(()=>C.trainer,S=>{Object.assign(k.value,S||V)},{immediate:!0});const I=()=>{Object.assign(k.value,V)};return(S,d)=>{const a=Ve,p=he,o=at,b=it,W=xe,G=He,g=Me;return y(),le("div",null,[n(g,{visible:l(T),"onUpdate:visible":d[11]||(d[11]=F=>pe(T)?T.value=F:null),modal:"",header:S.isUpdate?"Bestehenden Trainer bearbeiten":"Neuen Trainer anlegen",class:"w-[95vw] max-w-2xl"},{default:m(()=>[n(G,{initialValues:l(k),resolver:r,onSubmit:f,class:"flex flex-col w-full p-4"},{default:m(F=>{var Q,_,e,s,u,t,c,D,L,R,ie;return[i("div",Zs,[d[12]||(d[12]=i("label",{for:"firstname",class:"font-semibold sm:w-40"},"Vorname",-1)),i("div",Js,[n(a,{name:"firstname",modelValue:l(k).firstname,"onUpdate:modelValue":d[0]||(d[0]=h=>l(k).firstname=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(Q=F.firstname)!=null&&Q.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h;return[z(x((h=F.firstname.error)==null?void 0:h.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Qs,[d[13]||(d[13]=i("label",{for:"lastname",class:"font-semibold sm:w-40"},"Nachname",-1)),i("div",Xs,[n(a,{name:"lastname",modelValue:l(k).lastname,"onUpdate:modelValue":d[1]||(d[1]=h=>l(k).lastname=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(_=F.lastname)!=null&&_.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h;return[z(x((h=F.lastname)==null?void 0:h.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",Ys,[d[14]||(d[14]=i("label",{for:"dateOfBirth",class:"font-semibold sm:w-40"},"Geburtsdatum",-1)),i("div",el,[n(o,{name:"dateOfBirth","iso-date-string":l(k).dateOfBirth,"onUpdate:isoDateString":d[2]||(d[2]=h=>l(k).dateOfBirth=h),customDefaultValue:l(k).dateOfBirth,"max-date":new Date,"min-date":new Date("1900-01-01")},null,8,["iso-date-string","customDefaultValue","max-date","min-date"]),(e=F.dateOfBirth)!=null&&e.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h,j;return[z(x((j=(h=F.dateOfBirth)==null?void 0:h.error)==null?void 0:j.message),1)]}),_:2},1024)):A("",!0)])]),i("div",tl,[d[15]||(d[15]=i("label",{for:"placeOfBirth",class:"font-semibold sm:w-40"},"Geburtsort",-1)),i("div",sl,[n(a,{name:"placeOfBirth",modelValue:l(k).placeOfBirth,"onUpdate:modelValue":d[3]||(d[3]=h=>l(k).placeOfBirth=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(s=F.placeOfBirth)!=null&&s.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h,j;return[z(x((j=(h=F.placeOfBirth)==null?void 0:h.error)==null?void 0:j.message),1)]}),_:2},1024)):A("",!0)])]),i("div",ll,[d[16]||(d[16]=i("label",{for:"street",class:"font-semibold sm:w-40"},"Straße",-1)),i("div",al,[n(a,{name:"street",modelValue:l(k).street,"onUpdate:modelValue":d[4]||(d[4]=h=>l(k).street=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(u=F.street)!=null&&u.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h,j;return[z(x((j=(h=F.street)==null?void 0:h.error)==null?void 0:j.message),1)]}),_:2},1024)):A("",!0)])]),i("div",nl,[d[17]||(d[17]=i("label",{for:"street",class:"font-semibold sm:w-40 overflow-clip overflow-ellipsis"},"Hausnr. /Tür /Stiege",-1)),i("div",il,[n(a,{name:"house",class:"w-full flex-grow-0",modelValue:l(k).house,"onUpdate:modelValue":d[5]||(d[5]=h=>l(k).house=h),autocomplete:"off"},null,8,["modelValue"]),(t=F.house)!=null&&t.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h;return[z(x((h=F.house)==null?void 0:h.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",rl,[d[18]||(d[18]=i("label",{for:"plz",class:"font-semibold sm:w-40"},"Postleitzahl",-1)),i("div",ol,[n(b,{name:"plz",useGrouping:!1,modelValue:l(k).plz,"onUpdate:modelValue":d[6]||(d[6]=h=>l(k).plz=h),invalid:(c=F.plz)==null?void 0:c.invalid,class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue","invalid"]),(D=F.plz)!=null&&D.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h;return[z(x((h=F.plz)==null?void 0:h.error.message),1)]}),_:2},1024)):A("",!0)])]),i("div",ul,[d[19]||(d[19]=i("label",{for:"place",class:"font-semibold sm:w-40"},"Ort",-1)),i("div",dl,[n(a,{name:"place",modelValue:l(k).place,"onUpdate:modelValue":d[7]||(d[7]=h=>l(k).place=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(L=F.place)!=null&&L.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h,j;return[z(x((j=(h=F.place)==null?void 0:h.error)==null?void 0:j.message),1)]}),_:2},1024)):A("",!0)])]),i("div",ml,[d[20]||(d[20]=i("label",{for:"mail",class:"font-semibold sm:w-40"},"Email Adresse",-1)),i("div",fl,[n(a,{name:"mail",modelValue:l(k).mail,"onUpdate:modelValue":d[8]||(d[8]=h=>l(k).mail=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(R=F.mail)!=null&&R.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h,j;return[z(x((j=(h=F.mail)==null?void 0:h.error)==null?void 0:j.message),1)]}),_:2},1024)):A("",!0)])]),i("div",pl,[d[21]||(d[21]=i("label",{for:"phone",class:"font-semibold sm:w-40"},"Telefonnummer",-1)),i("div",cl,[n(a,{name:"phone",placeholder:"+43 6501234567",modelValue:l(k).phone,"onUpdate:modelValue":d[9]||(d[9]=h=>l(k).phone=h),class:"w-full flex-grow-0",autocomplete:"off"},null,8,["modelValue"]),(ie=F.phone)!=null&&ie.invalid?(y(),U(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var h,j;return[z(x((j=(h=F.phone)==null?void 0:h.error)==null?void 0:j.message),1)]}),_:2},1024)):A("",!0)])]),i("div",hl,[n(W,{type:"button",label:"Abbrechen",severity:"secondary",onClick:d[10]||(d[10]=h=>(T.value=!1,I()))}),n(W,{type:"submit",label:S.isUpdate?"Speichern":"Erstellen"},null,8,["label"])])]}),_:1},8,["initialValues"])]),_:1},8,["visible","header"])])}}}),_l=Object.assign(gl,{__name:"ManageTrainerDialog"}),vl={class:"flex flex-col gap-3 md:p-2"},bl={class:"w-full"},yl={class:"flex flex-col lg:flex-row gap-3 w-full flex-wrap"},wl={class:"flex flex-col flex-shrink-0 sm:flex-row gap-2 w-auto"},xl={key:0},kl={key:1},Sl={class:"flex gap-2"},Vl=ve({__name:"TrainerTable",setup(X){const E=Ee(),O=Le(),v=Re(),N=H({}),C=H({}),T=H(!1),V=H(!1),k=H(null),r=async p=>{N.value[p]=!0;const o=await E.getTrainerById(p);o&&(k.value=o,V.value=!0,T.value=!0),N.value[p]=!1},f=Pe(),I=(p,o)=>{f.require({target:p.currentTarget,message:"Wollen Sie den Trainer wirklich löschen?",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Abbrechen",severity:"secondary"},acceptProps:{severity:"danger",label:"Löschen"},accept:async()=>{C.value[o]=!0,await E.deleteTrainer(o),C.value[o]=!1}})},S=H(),d=()=>{const p=E.trainers.map(g=>({Vorname:g.firstname,Nachname:g.lastname,Geburtsdatum:g.dateOfBirth?new Date(g.dateOfBirth).toLocaleDateString():"",Wohnort:`${g.plz} ${g.place}`,Straße:`${g.street} ${g.house}`,Telefon:g.phone,Email:g.mail})),o=et.unparse(p,{delimiter:";"}),b=new Blob([o],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),G=URL.createObjectURL(b);W.setAttribute("href",G),W.setAttribute("download","Trainerübersicht.csv"),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W)},a=H({global:{value:null,matchMode:Fe.CONTAINS}});return(p,o)=>{const b=_l,W=he,G=Ke,g=Ve,F=Ge,Q=Ye,_=xe,e=ze,s=rt,u=Ue;return y(),le("div",null,[n(b,{trainer:l(k),"onUpdate:trainer":o[0]||(o[0]=t=>pe(k)?k.value=t:null),isVisible:l(T),"onUpdate:isVisible":o[1]||(o[1]=t=>pe(T)?T.value=t:null),isUpdate:l(V)},null,8,["trainer","isVisible","isUpdate"]),n(u,{ref_key:"dt",ref:S,value:l(E).trainers,"onUpdate:value":o[6]||(o[6]=t=>l(E).trainers=t),scrollable:"","scroll-height":"flex","data-key":"userId",removableSort:"","sort-mode":"multiple","striped-rows":"",filters:l(a),globalFilterFields:["firstname","lastname","dateOfBirth","plz","place"]},{empty:m(()=>[n(W,{severity:"info"},{default:m(()=>o[7]||(o[7]=[z("Es wurden keine Trainer gefunden.")])),_:1})]),header:m(()=>[i("div",vl,[i("div",bl,[n(F,{class:"w-full flex-grow"},{default:m(()=>[n(G,null,{default:m(()=>o[8]||(o[8]=[i("i",{class:"pi pi-search"},null,-1)])),_:1}),n(g,{class:"w-full",modelValue:l(a).global.value,"onUpdate:modelValue":o[2]||(o[2]=t=>l(a).global.value=t),placeholder:"Suche nach Vorname, Nachname, Alter, PLZ, Ort"},null,8,["modelValue"])]),_:1})]),i("div",yl,[n(Q,{class:"max-w-full flex-grow",modelValue:l(O).trainerColumns,"onUpdate:modelValue":o[3]||(o[3]=t=>l(O).trainerColumns=t),options:l(O).availableTrainerCols,optionLabel:"header",display:"chip",placeholder:"Weitere Informationen einblenden"},null,8,["modelValue","options"]),i("div",wl,[n(_,{class:"h-10 px-4 flex-grow",icon:"pi pi-external-link",label:"Exportieren",severity:"contrast",size:"small",onClick:o[4]||(o[4]=t=>d())}),n(_,{class:"h-10 px-4 flex-grow",icon:"pi pi-plus",label:"Neuer Trainer",size:"small",severity:"success",onClick:o[5]||(o[5]=t=>(k.value=null,T.value=!0,V.value=!1))})])])])]),default:m(()=>[n(e,{field:"lastname",header:"Name",sortable:""},{body:m(({data:t})=>[z(x(t.firstname)+" "+x(t.lastname),1)]),_:1}),l(O).trainerColumns.some(t=>t.field=="mail")?(y(),U(e,{key:0,name:"mail",header:"Email"},{body:m(({data:t})=>[z(x(t.mail),1)]),_:1})):A("",!0),l(O).trainerColumns.some(t=>t.field=="phone")?(y(),U(e,{key:1,name:"phone",header:"Telefonnummer"},{body:m(({data:t})=>[z(x(t.phone),1)]),_:1})):A("",!0),l(O).trainerColumns.some(t=>t.field=="dateOfBirth")?(y(),U(e,{key:2,name:"dateOfBirth",header:"Geburtsdatum",sortField:"dateOfBirth",sortable:""},{body:m(({data:t})=>[t.dateOfBirth?(y(),le("span",kl,x(new Date(t.dateOfBirth).toLocaleDateString())+" ("+x(l(Ze)(t.dateOfBirth))+"J.) ",1)):(y(),le("span",xl,"-"))]),_:1})):A("",!0),l(O).trainerColumns.some(t=>t.field=="placeOfBirth")?(y(),U(e,{key:3,name:"placeOfBirth",header:"Geburtsort"},{body:m(({data:t})=>[z(x(t.placeOfBirth),1)]),_:1})):A("",!0),l(O).trainerColumns.some(t=>t.field=="street")?(y(),U(e,{key:4,name:"street",header:"Straße",sortField:"street",sortable:""},{body:m(({data:t})=>[z(x(t.street)+" "+x(t.house),1)]),_:1})):A("",!0),l(O).trainerColumns.some(t=>t.field=="place")?(y(),U(e,{key:5,name:"place",header:"Wohnort","sort-field":"place",sortable:""},{body:m(({data:t})=>[z(x(t.plz)+" "+x(t.place),1)]),_:1})):A("",!0),n(e,{field:"trainerId",header:"Aktionen",style:{width:"6rem"},"align-frozen":"right",frozen:l(O).frozenColumns},{body:m(({data:t})=>[n(s),i("div",Sl,[n(_,{disabled:!l(v).user.isAdmin&&l(v).user.trainerId!==t.userId,icon:"pi pi-pencil",severity:"info",onClick:c=>r(t.userId),loading:l(N)[t.userId],rounded:"","aria-label":"Edit"},null,8,["disabled","onClick","loading"]),l(v).user.isAdmin?(y(),U(_,{key:0,icon:"pi pi-trash",severity:"danger",rounded:"",onClick:c=>I(c,t.userId),loading:l(C)[t.userId],"aria-label":"Delete"},null,8,["onClick","loading"])):A("",!0)])]),_:1},8,["frozen"])]),_:1},8,["value","filters"])])}}}),Tl=Object.assign(Vl,{__name:"ManageTrainerTable"}),ut=pt("user",()=>{const X=ht(),E=Re(),O=Le(),v=Be(),N=H([]);ct(()=>{E.user.isAuthenticated&&C()});async function C(){var S;if(!E.user.isAuthenticated||!E.user.isAdmin)return!1;const{data:f,error:I}=await Qe(`${X.public.apiBase}/users`,{server:!1,method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E.user.token}`}},"$G4-OsWX7AR");return((S=I.value)==null?void 0:S.statusCode)===401&&(E.user.isAuthenticated=!1),N.value=f.value?f.value:[],f.value?f.value:null}async function T(f){var a,p;if(!E.user.isAuthenticated||!E.user.isAdmin)return!1;const{data:I,error:S,status:d}=await Qe(`${X.public.apiBase}/user`,{server:!1,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E.user.token}`},body:{username:f.username,email:f.email,password:f.password,role:f.role,trainer:f.trainer}},"$HdVmwUeoVZ");if(((a=S.value)==null?void 0:a.statusCode)===401&&(E.user.isAuthenticated=!1),S.value){v.add({severity:"error",summary:"Fehler",detail:"Benutzerzugang konnte nicht erstellt werden",life:3e3});return}if(d.value==="success"&&((p=I.value)!=null&&p.uuid)){const o={...f,uuid:I.value.uuid};return N.value.push(o),v.add({severity:"success",summary:"Erfolgreich",detail:"Benutzerzugang erfolgreich erstellt",life:3e3}),!0}return!0}async function V(f){var a;if(!E.user.isAuthenticated||!E.user.isAdmin)return!1;const{data:I,error:S,status:d}=await Qe(`${X.public.apiBase}/user/${f}`,{server:!1,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E.user.token}`}},"$l-CD74HsOK");if(((a=S.value)==null?void 0:a.statusCode)===401&&(E.user.isAuthenticated=!1),S.value){v.add({severity:"error",summary:"Fehler",detail:"Benutzerzugang konnte nicht gelöscht werden",life:3e3});return}if(d.value=="success")return v.add({severity:"success",summary:"Erfolgreich",detail:"Benutzerzugang erfolgreich gelöscht",life:3e3}),N.value=N.value.filter(p=>p.uuid!==f),!0}function k(f){return N.value.find(I=>I.username===f)===void 0}function r(f){return N.value.find(I=>I.email===f)===void 0}return bt(C,O.updateInterval*1e3),{user:N,fetchUsers:C,addUser:T,deleteUser:V,isUniqueUsername:k,isUniqueEmail:r}}),Cl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Ol={class:"flex flex-col gap-1 w-full"},Bl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Ul={class:"flex flex-col gap-1 w-full"},zl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},El={class:"flex flex-col gap-1 w-full"},Dl={class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Al={class:"flex flex-col gap-1 w-full"},Il={key:0,class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4"},Fl={class:"flex flex-col gap-1 w-full"},Rl={class:"flex justify-end gap-2 mt-4"},$l=ve({__name:"UserDialog",props:{isVisible:{type:Boolean,required:!0}},emits:["update:isVisible"],setup(X,{emit:E}){const O=Be(),v=ut(),N=Ee(),C=X,T=E,V=Te({get:()=>C.isVisible,set:a=>T("update:isVisible",a)}),k=zt,r=gt({...k}),f=["admin","trainer"],I=({values:a})=>{const p={};if(a.email||(p.email=[{message:"Email ist erforderlich."}]),a.email&&!$e(a.email)&&(p.email=[{message:"Ungültige Email Adresse"}]),a.email&&!v.isUniqueEmail(a.email)&&(p.email=[{message:"Diese Email ist bereits in Verwendung!"}]),a.username||(p.username=[{message:"Benutzername ist erforderlich."}]),a.username&&a.username.length<3&&(p.username=[{message:"Benutzername muss mindestens 3 Zeichen lang sein."}]),a.username&&!v.isUniqueUsername(a.username)&&(p.username=[{message:"Benutzername existiert bereits."}]),a.password?(a.password.length<6&&(p.password=[{message:"Passwort muss mindestens 6 Zeichen haben."}]),/[a-z]/.test(a.password)||(p.password=[{message:"Muss ein Kleinbuchstabe enthalten."}]),/[A-Z]/.test(a.password)||(p.password=[{message:"Muss ein Großbuchstabe enthalten."}]),/\d/.test(a.password)||(p.password=[{message:"Muss eine Zahl enthalten."}])):p.password=[{message:"Passwort ist erforderlich."}],r.role||(p.role=[{message:"Rolle muss ausgewählt werden"}]),a.role==="trainer"&&a.trainer,r.role==="trainer"){const o=r.trainer;o==null&&(p.trainer=[{message:"Trainer muss ausgewählt werden"}])}return{errors:Object.keys(p).length?p:null}},S=async({valid:a})=>{if(!a){O.add({severity:"error",summary:"Bitte überprüfen Sie ihre Eingaben.",life:3e3});return}await v.addUser(r)&&(V.value=!1,d())},d=()=>{Object.assign(r,k)};return(a,p)=>{const o=Ve,b=he,W=yt,G=ot,g=Xe,F=xe,Q=He,_=Me;return y(),le("div",null,[n(_,{visible:l(V),"onUpdate:visible":p[6]||(p[6]=e=>pe(V)?V.value=e:null),header:"Neuen Benutzerzugang anlegen",class:"w-[95vw] max-w-2xl",modal:""},{default:m(()=>[n(Q,{resolver:I,onSubmit:S,class:"flex flex-col w-full p-4"},{default:m(e=>{var s,u,t,c,D;return[i("div",Cl,[p[7]||(p[7]=i("label",{for:"email",class:"font-semibold sm:w-40"},"Email",-1)),i("div",Ol,[n(o,{id:"email",name:"email",modelValue:l(r).email,"onUpdate:modelValue":p[0]||(p[0]=L=>l(r).email=L),fluid:""},null,8,["modelValue"]),(s=e.email)!=null&&s.invalid?(y(),U(b,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(e.email.error.message),1)]),_:2},1024)):A("",!0)])]),i("div",Bl,[p[8]||(p[8]=i("label",{for:"username",class:"font-semibold sm:w-40"},"Benutzername",-1)),i("div",Ul,[n(o,{id:"username",name:"username",modelValue:l(r).username,"onUpdate:modelValue":p[1]||(p[1]=L=>l(r).username=L),fluid:""},null,8,["modelValue"]),(u=e.username)!=null&&u.invalid?(y(),U(b,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(e.username.error.message),1)]),_:2},1024)):A("",!0)])]),i("div",zl,[p[9]||(p[9]=i("label",{for:"password",class:"font-semibold sm:w-40"},"Passwort",-1)),i("div",El,[n(W,{name:"password",modelValue:l(r).password,"onUpdate:modelValue":p[2]||(p[2]=L=>l(r).password=L),feedback:!1,fluid:""},null,8,["modelValue"]),(t=e.password)!=null&&t.invalid?(y(!0),le(nt,{key:0},_t(e.password.errors,(L,R)=>(y(),U(b,{key:R,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(L.message),1)]),_:2},1024))),128)):A("",!0)])]),i("div",Dl,[p[10]||(p[10]=i("label",{for:"role",class:"font-semibold sm:w-40"},"Rolle",-1)),i("div",Al,[n(g,{id:"role",name:"role",options:f,modelValue:l(r).role,"onUpdate:modelValue":p[3]||(p[3]=L=>l(r).role=L),fluid:""},{option:m(L=>[n(G,{value:L.option,severity:L.option=="trainer"?"info":"warn"},null,8,["value","severity"])]),_:1},8,["modelValue"]),(c=e.role)!=null&&c.invalid?(y(),U(b,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(e.role.error.message),1)]),_:2},1024)):A("",!0)])]),l(r).role==="trainer"?(y(),le("div",Il,[p[11]||(p[11]=i("label",{for:"trainer",class:"font-semibold sm:w-40"},"Trainerzugang verknüpfen",-1)),i("div",Fl,[n(g,{id:"trainer",name:"trainer",optionLabel:"label",optionValue:"value",options:l(N).mappedTrainers,modelValue:l(r).trainer,"onUpdate:modelValue":p[4]||(p[4]=L=>l(r).trainer=L),fluid:""},null,8,["options","modelValue"]),(D=e.trainer)!=null&&D.invalid?(y(),U(b,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>[z(x(e.trainer.error.message),1)]),_:2},1024)):A("",!0)])])):A("",!0),i("div",Rl,[n(F,{type:"button",label:"Abbrechen",severity:"secondary",onClick:p[5]||(p[5]=L=>(V.value=!1,d()))}),n(F,{type:"submit",label:"Erstellen"})])]}),_:1})]),_:1},8,["visible"])])}}}),Nl=Object.assign($l,{__name:"ManageUserDialog"}),Ml={key:0},Pl={key:1},Ll={class:"flex flex-col lg:flex-row gap-3 md:p-2 w-full flex-wrap"},jl={key:0},ql={key:1,class:"text-sm italic"},Wl={class:"flex flex-row gap-2"},Hl=ve({__name:"UserTable",setup(X){const E=Re(),O=ut(),v=Ee(),N=Le(),C=H(!1),T=Pe(),V=(r,f)=>{T.require({target:r.currentTarget,message:"Wollen Sie diesen Benutzerzugang wirklich löschen?",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Abbrechen",severity:"secondary"},acceptProps:{severity:"danger",label:"Löschen"},accept:()=>{O.deleteUser(f)}})},k=H({global:{value:null,matchMode:Fe.CONTAINS}});return(r,f)=>{const I=he,S=Nl,d=Ke,a=Ve,p=Ge,o=xe,b=ze,W=ot,G=Ue;return("useAuthStore"in r?r.useAuthStore:l(Re))().user.isAdmin?(y(),le("div",Pl,[n(S,{isVisible:l(C),"onUpdate:isVisible":f[0]||(f[0]=g=>pe(C)?C.value=g:null)},null,8,["isVisible"]),n(G,{value:l(O).user,"onUpdate:value":f[3]||(f[3]=g=>l(O).user=g),"data-key":"uuid",scrollable:"","scroll-height":"flex","removable-sort":"","striped-rows":"",filters:l(k),globalFilterFields:["username","email","role"]},{header:m(()=>[i("div",Ll,[n(p,{class:"max-w-full flex-grow"},{default:m(()=>[n(d,null,{default:m(()=>f[5]||(f[5]=[i("i",{class:"pi pi-search"},null,-1)])),_:1}),n(a,{class:"w-full",modelValue:l(k).global.value,"onUpdate:modelValue":f[1]||(f[1]=g=>l(k).global.value=g),placeholder:"Suche nach Benutzername, Email, Rolle"},null,8,["modelValue"])]),_:1}),n(o,{icon:"pi pi-plus",label:"Benutzer erstellen",severity:"success",onClick:f[2]||(f[2]=g=>C.value=!0)})])]),default:m(()=>[n(b,{field:"username",header:"Benutzername"}),n(b,{field:"email",header:"Email"}),n(b,{field:"role",header:"Rolle"},{body:m(({data:g})=>[n(W,{value:g.role,severity:g.role=="trainer"?"info":"warn"},null,8,["value","severity"])]),_:1}),n(b,{field:"trainer",header:"Trainer"},{body:m(({data:g})=>{var F,Q;return[l(v).trainerById(g.trainer)?(y(),le("span",jl,x((F=l(v).trainerById(g.trainer))==null?void 0:F.firstname)+" "+x((Q=l(v).trainerById(g.trainer))==null?void 0:Q.lastname),1)):(y(),le("span",ql,"(Kein Trainer)"))]}),_:1}),l(E).user.isAdmin?(y(),U(b,{key:0,field:"uuid",header:"Aktionen",style:{width:"4rem"},"align-frozen":"right",frozen:l(N).frozenColumns},{body:m(({data:g})=>[i("div",Wl,[n(o,{icon:"pi pi-trash",severity:"danger",disabled:g.username==l(E).user.username,rounded:"",onClick:F=>V(F,g.uuid),"aria-label":"Delete"},null,8,["disabled","onClick"])])]),_:1},8,["frozen"])):A("",!0)]),_:1},8,["value","filters"])])):(y(),le("div",Ml,[n(I,{severity:"error",icon:"pi pi-times-circle"},{default:m(()=>f[4]||(f[4]=[z(" Nur Admins können auf diese Seite zugreifen ")])),_:1})]))}}}),Gl=Object.assign(Hl,{__name:"ManageUserTable"}),Kl={key:1,class:"container"},Zl={class:"card"},Jl={class:"flex gap-1 justify-center items-center"},Ya=ve({__name:"management",setup(X){Ct({title:"Verwaltung | USC Maria Taferl",htmlAttrs:{lang:"de"},meta:[{name:"description",content:"Verwaltungsseite des USC Maria Taferl. Änderungen zum Datenbestand können hier vorgenommen werden."},{name:"keywords",content:"Maria Taferl, Fußball Maria Taferl, USC Maria Taferl, Vewaltung USC"},{name:"author",content:"USC Maria Taferl"}]}),Be();const E=vt(),O=Re();O.setRedirectRoute(E.currentRoute.value.fullPath);const v=H(localStorage.getItem("managementTab")||"0");Ie(v,T=>{O.user.isAdmin!=!0&&T=="3"?(v.value="0",localStorage.setItem("managementTab","0")):localStorage.setItem("managementTab",T)}),Ie(()=>O.user.isAdmin,T=>{!T&&v.value==="3"&&(v.value="0",localStorage.setItem("managementTab","0"))},{immediate:!0});const N=H(),C=T=>{N.value.toggle(T)};return(T,V)=>{const k=dt,r=mt,f=Tt,I=Vt,S=St,d=hs,a=kt,p=Ks,o=Tl,b=Gl,W=xt,G=wt;return y(),le(nt,null,[n(k,{title:"Vereinsverwaltung","h-level":1}),l(O).user.isAuthenticated?(y(),le("div",Kl,[i("div",Zl,[n(G,{value:l(v),"onUpdate:value":V[0]||(V[0]=g=>v.value=g),scrollable:""},{default:m(()=>[n(S,null,{default:m(()=>[n(f,{value:"0",as:"div",class:"flex items-center"},{default:m(()=>V[1]||(V[1]=[i("span",{class:"font-bold whitespace-nowrap"},"Spieler verwalten",-1)])),_:1}),n(f,{value:"1",as:"div",class:"flex items-center"},{default:m(()=>V[2]||(V[2]=[i("span",{class:"font-bold whitespace-nowrap"},"Mannschaften verwalten",-1)])),_:1}),n(f,{value:"2",as:"div",class:"flex items-center"},{default:m(()=>V[3]||(V[3]=[i("span",{class:"font-bold whitespace-nowrap"},"Trainer verwalten",-1)])),_:1}),l(O).user.isAdmin?(y(),U(f,{key:0,value:"3",as:"div",class:"flex items-center"},{default:m(()=>[i("div",Jl,[i("span",{onClick:C,class:"pi pi-info-circle",style:{"font-size":"1.2rem"}}),n(I,{ref_key:"op",ref:N},{default:m(()=>V[4]||(V[4]=[i("div",{class:"max-w-[420px] w-[95vw]"}," Auf dieser Seite können Sie Zugänge für Trainer und Admins verwalten. Verlinken Sie dazu den gewünschten Trainer Zugang mit dem Richtigen Trainer-Account. ",-1)])),_:1},512),V[5]||(V[5]=i("span",{class:"font-bold whitespace-nowrap"},"Benutzer verwalten",-1))])]),_:1})):A("",!0)]),_:1}),n(W,null,{default:m(()=>[n(a,{value:"0",as:"div",class:"m-0 p-0"},{default:m(()=>[n(d)]),_:1}),n(a,{value:"1",as:"div",class:"m-0 p-0"},{default:m(()=>[n(p)]),_:1}),n(a,{value:"2"},{default:m(()=>[n(o)]),_:1}),l(O).user.isAdmin?(y(),U(a,{key:0,value:"3"},{default:m(()=>[n(b)]),_:1})):A("",!0)]),_:1})]),_:1},8,["value"])])])):(y(),U(r,{key:0,class:"container"}))],64)}}});export{Ya as default};
