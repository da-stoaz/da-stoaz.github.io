import{_ as j}from"./JPTxK4B8.js";import L from"./v14wUJ7k.js";import{d as w,c as f,o as p,a as o,w as g,g as s,e as h,j as S,f as t,i as x,s as E,r as T,F as D,t as b,k as P,y as V,v as M,q as F,z as O}from"./DqA0wvgn.js";import z from"./Co8-PoAd.js";import{u as $}from"./D54JuXSh.js";import R from"./Dq60U7H_.js";import G from"./CruGe7-4.js";import{u as U}from"./BFl8g0lt.js";import{u as B}from"./BAj6X1XV.js";import H from"./ChmBoeTK.js";import W from"./BL4dKXUN.js";import q from"./h23Egmxw.js";import J from"./xJh7gdIs.js";import{u as C}from"./DbDqPOJ7.js";import{u as K}from"./DlM3upmM.js";import"./Cl6nUjVB.js";import"./B6SoegvQ.js";import"./iBF5vbor.js";import"./BPKLwf0D.js";import"./CWY8yeRe.js";import"./CIEVKKL1.js";import"./D59xopTu.js";import"./DLmmK4TJ.js";import"./xWDfZRNS.js";import"./CJU-G3S3.js";import"./Dwe5DX2x.js";import"./CrqMR_Gz.js";import"./92YlIw8Z.js";import"./Vjg67_ig.js";import"./Dq2NiRLV.js";import"./CbAtA9qB.js";import"./Fiz1UT9X.js";import"./DwqQTTJx.js";import"./BnCsyjQa.js";import"./Nlcgn0cH.js";import"./BuP_ugxb.js";import"./CRropaqv.js";import"./Ct1S-YFo.js";import"./X7vmODOq.js";import"./NPLl8jsO.js";import"./CVaysz5l.js";import"./C_LOnxQR.js";import"./QJzStsYb.js";import"./H93Q_ufk.js";import"./DRGOXiAK.js";import"./B3N0Dfa_.js";const Q={class:"flex flex-col gap-4"},X={key:0,class:"flex flex-col gap-2"},Y=w({__name:"EventDeleteDialog",props:{visible:{type:Boolean},event:{}},emits:["update:visible"],setup(y,{emit:l}){const a=y,n=l,m=$(),e=async()=>{await m.deleteEvent(a.event.resGroupId)&&r()},d=async()=>{a.event.groupName&&await m.deleteRecurringEvent(a.event.groupName)&&r()},r=()=>{n("update:visible",!1)};return(_,u)=>{const v=z,i=E,c=L;return p(),f("div",null,[o(c,{header:"Platzbuchung löschen",visible:a.visible,"onUpdate:visible":u[3]||(u[3]=k=>_.$emit("update:visible",k)),modal:!0,class:"w-[320px] max-w-[95vw]",draggable:!1},{default:g(()=>[s("div",Q,[a.event.groupName?(p(),f("div",X,[o(t(R),{severity:"info",size:"small",icon:"pi pi-info-circle"},{default:g(()=>u[4]||(u[4]=[x(" Diese Buchung ist ein wiederholendes Ereignis. ")])),_:1}),o(v),a.event.groupName?(p(),S(i,{key:0,onClick:u[0]||(u[0]=k=>d()),label:"Alle Buchungen löschen",severity:"danger"})):h("",!0)])):h("",!0),o(i,{onClick:u[1]||(u[1]=k=>e()),label:"Diese Buchung löschen",severity:"danger"}),o(i,{label:"Abbrechen",severity:"secondary",onClick:u[2]||(u[2]=k=>_.$emit("update:visible",!1))})])]),_:1},8,["visible"])])}}}),Z=Object.assign(Y,{__name:"EventDeleteDialog"}),ee={class:"flex flex-col w-full rounded-lg"},te={class:"flex flex-col space-y-2"},ne={class:"flex flex-row justify-between"},se={class:"text-surface-800 dark:text-surface-200"},ie={class:"flex flex-row justify-between"},oe={class:"text-gray-800 dark:text-surface-200"},re={class:"flex flex-row justify-between"},le={class:"text-gray-800 dark:text-surface-200"},ae={class:"flex flex-row justify-between"},de={class:"text-gray-800 dark:text-surface-200"},ue={class:"flex flex-row justify-between"},pe={class:"text-gray-800 dark:text-surface-200"},me={key:0,class:"flex flex-col space-y-2 mt-4"},ve={class:"flex flex-row w-full gap-2"},ce=w({__name:"EventInfo",props:{event:{}},setup(y,{expose:l}){const a=y,n=U(),m=$(),e=B(),d=T(!1),r=m.getStartAndEndTimeForResGroupId(a.event.resGroupId),_=T(),u=()=>{var v;(v=_.value)==null||v.hide()};return l({toggle:v=>{var i;return(i=_.value)==null?void 0:i.toggle(v)},hide:()=>{var v;return(v=_.value)==null?void 0:v.hide()}}),(v,i)=>{const c=z,k=E,N=G,I=Z;return p(),f(D,null,[o(N,{ref_key:"op",ref:_,dismissable:!1,"close-on-escape":!1,class:"w-[400px] max-w-[90vw]"},{default:g(()=>[s("div",ee,[s("div",te,[i[7]||(i[7]=s("h3",{class:"text-xl font-semibold text-gray-800 dark:text-surface-200"}," Trainingsdetails ",-1)),o(c,{class:"!m-0"}),s("div",ne,[i[2]||(i[2]=s("p",{class:"font-medium text-surface-600 dark:text-surface-300"}," Trainer: ",-1)),s("p",se,b(t(n).trainerNameById(a.event.trainer)),1)]),s("div",ie,[i[3]||(i[3]=s("p",{class:"font-medium text-surface-600 dark:text-surface-300"}," Team: ",-1)),s("p",oe,b(a.event.team),1)]),s("div",re,[i[4]||(i[4]=s("p",{class:"font-medium text-surface-600 dark:text-surface-300"}," Trainingsbeginn: ",-1)),s("p",le,b(t(r)?t(r).startTime:"-")+" Uhr ",1)]),s("div",ae,[i[5]||(i[5]=s("p",{class:"font-medium text-surface-600 dark:text-surface-300"}," Trainingsende: ",-1)),s("p",de,b(t(r)?t(r).endTime:"-")+" Uhr ",1)]),s("div",ue,[i[6]||(i[6]=s("p",{class:"font-medium text-surface-600 dark:text-surface-300"}," Wiederholendes Ereignis: ",-1)),s("p",pe,b(v.event.groupName?"Wöchentlich":"Nein"),1)])]),t(e).user.isAdmin||t(e).user.trainerId===a.event.trainer?(p(),f("div",me,[i[8]||(i[8]=s("h3",{class:"text-xl font-semibold text-gray-800 dark:text-surface-200"}," Aktionen ",-1)),o(c,{class:"!m-0"}),s("div",ve,[o(k,{id:"del-button-"+a.event.resId,icon:"pi pi-exit",label:"Abbrechen",fluid:"",severity:"secondary",size:"small",onClick:u},null,8,["id"]),o(k,{id:"del-button-"+a.event.resId,icon:"pi pi-trash",label:"Buchung Löschen",fluid:"",severity:"danger",size:"small",onClick:i[0]||(i[0]=A=>d.value=!0)},null,8,["id"])])])):h("",!0)])]),_:1},512),o(I,{visible:t(d),"onUpdate:visible":i[1]||(i[1]=A=>P(d)?d.value=A:null),event:a.event},null,8,["visible","event"])],64)}}}),fe=Object.assign(ce,{__name:"EventInfo"}),ge={class:"text-center select-none"},_e={key:0},xe={key:1,class:"relative w-full"},be={key:0,class:"absolute top-0 left-0"},ye={class:"flex flex-col items-center"},ke={class:"flex flex-row"},he=w({__name:"EventSlot",props:{priviledged:{type:Boolean},event:{}},setup(y){const l=y,a=U(),n=T(),m=e=>{var d;(d=n.value)==null||d.toggle(e)};return(e,d)=>{const r=H,_=fe;return p(),f("div",ge,[o(r,{severity:e.event?"info":"success",class:V(["w-full h-full",{"cursor-pointer":e.priviledged&&e.event}]),onClick:d[0]||(d[0]=u=>e.priviledged&&e.event&&m(u))},{default:g(()=>[e.event?(p(),f("div",xe,[("useAuthStore"in e?e.useAuthStore:t(B))().user.isAuthenticated?(p(),f("div",be,d[1]||(d[1]=[s("i",{class:"pi pi-info-circle"},null,-1)]))):h("",!0),s("div",ye,[s("div",null,b(e.event.team),1),s("div",ke,[e.priviledged?(p(),f(D,{key:0},[x(" ("+b(t(a).trainerNameById(Number(e.event.trainer)))+") ",1)],64)):(p(),f(D,{key:1},[x(" ("+b(e.event.trainer)+") ",1)],64))])])])):(p(),f("div",_e,"Frei"))]),_:1},8,["severity","class"]),l.priviledged&&l.event?(p(),S(_,{key:0,ref_key:"eventInfo",ref:n,event:l.event},null,8,["event"])):h("",!0)])}}}),we=Object.assign(he,{__name:"EventSlot"}),$e={class:""},Te=w({__name:"EventTable",props:{priviledged:{type:Boolean},reservations:{}},setup(y){const l=y;return(a,n)=>{const m=q,e=we,d=W;return p(),S(d,{value:l.reservations,"onUpdate:value":n[0]||(n[0]=r=>l.reservations=r),showGridlines:"",scrollable:"",stripedRows:"","data-key":"time",tableStyle:"min-width: 50rem"},{default:g(()=>[o(m,{field:"time",header:"Uhrzeit",style:{width:"4rem"},class:"!z-50","align-frozen":"left",frozen:""},{body:g(({data:r})=>[s("div",$e,b(r.time.split(" ")[1].slice(0,-3)),1)]),_:1}),o(m,{field:"field1",header:"Hauptplatz Teil-1"},{body:g(({data:r})=>[o(e,{priviledged:l.priviledged,event:r.field1},null,8,["priviledged","event"])]),_:1}),o(m,{field:"field2",header:"Hauptplatz Teil-2"},{body:g(({data:r})=>[o(e,{priviledged:l.priviledged,event:r.field2},null,8,["priviledged","event"])]),_:1}),o(m,{field:"field3",header:"Trainingsplatz"},{body:g(({data:r})=>[o(e,{priviledged:l.priviledged,event:r.field3},null,8,["priviledged","event"])]),_:1})]),_:1},8,["value"])}}}),De=Object.assign(Te,{__name:"EventTable"}),Se={class:"container flex flex-col gap-2"},Ee={class:"card flex flex-col items-center gap-4 mb-6"},Be={class:"flex flex-row gap-2"},Ae={key:0},Ce={key:1},$t=w({__name:"overview",setup(y){K({title:"Platzübersicht | USC Maria Taferl",htmlAttrs:{lang:"de"},meta:[{name:"description",content:"Buchungsübersicht des USC Maria Taferl"},{name:"keywords",content:"USC, Maria Taferl, Fußball Maria Taferl"},{name:"author",content:"USC Maria Taferl"}]});const l=B(),a=M();let n=l.user.isAuthenticated?$():C();return F(()=>l.user.isAuthenticated,m=>{n=m?$():C(),n.getReservations()}),l.setRedirectRoute(a.currentRoute.value.fullPath),(m,e)=>{const d=j,r=E,_=J,u=De,v=O,i=R;return p(),f("div",Se,[o(d,{title:"Buchungsübersicht",hLevel:1}),s("div",Ee,[s("div",Be,[o(r,{loading:t(n).isLoading==1,disabled:t(n).isLoading!=0,icon:"pi pi-angle-left",onClick:e[0]||(e[0]=c=>{t(n).selectedDate=new Date(t(n).selectedDate.getTime()-24*60*60*1e3),t(n).isLoading=1,t(n).getReservations()}),rounded:""},null,8,["loading","disabled"]),o(_,{loading:t(n).isLoading!=0,dateFormat:"dd/mm/yy",selectOtherMonths:!0,onValueChange:e[1]||(e[1]=c=>t(n).getReservations()),onDateSelect:e[2]||(e[2]=c=>t(n).getReservations()),modelValue:t(n).selectedDate,"onUpdate:modelValue":e[3]||(e[3]=c=>t(n).selectedDate=c),class:"max-w-4/5 md:w-80",showButtonBar:""},null,8,["loading","modelValue"]),o(r,{loading:t(n).isLoading==2,disabled:t(n).isLoading!=0,icon:"pi pi-angle-right",onClick:e[4]||(e[4]=c=>{t(n).selectedDate=new Date(t(n).selectedDate.getTime()+24*60*60*1e3),t(n).isLoading=2,t(n).getReservations()}),rounded:""},null,8,["loading","disabled"])])]),o(u,{priviledged:t(l).user.isAuthenticated,"onUpdate:priviledged":e[5]||(e[5]=c=>t(l).user.isAuthenticated=c),reservations:t(n).reservations,"onUpdate:reservations":e[6]||(e[6]=c=>t(n).reservations=c)},null,8,["priviledged","reservations"]),o(i,{size:"small",icon:"pi pi-info-circle",severity:"secondary",variant:"outlined"},{default:g(()=>[e[11]||(e[11]=x(" Reservierungen können von Trainer und Administratoren ")),t(l).user.isAuthenticated?(p(),f("span",Ae,[e[8]||(e[8]=x("unter ")),o(v,{to:"/booking",class:"text-primary-500 underline hover:text-primary-300 transition duration-200"},{default:g(()=>e[7]||(e[7]=[x("Platzreservierung")])),_:1})])):h("",!0),e[12]||(e[12]=x(" durchgeführt werden. ")),t(l).user.isAuthenticated?h("",!0):(p(),f("span",Ce,[e[10]||(e[10]=x(" Um Änderungen vorzunehmen, ")),o(v,{to:"/login",class:"text-primary-500 underline hover:text-primary-300 transition duration-200"},{default:g(()=>e[9]||(e[9]=[x(" melden Sie sich bitte an.")])),_:1})]))]),_:1})])}}});export{$t as default};
