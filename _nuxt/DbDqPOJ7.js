import{l as P,r as e,q as B,n as H,L as j,u as q}from"./DqA0wvgn.js";import{t as $}from"./iBF5vbor.js";import{u as x}from"./BPKLwf0D.js";import{u as F}from"./CWY8yeRe.js";import{s as G}from"./BAj6X1XV.js";const k=P("publicEvent",()=>{const D=q(),E=x(),i=e([]),n=e(new Date(sessionStorage.getItem("selectedDate")||new Date));B(n,a=>{sessionStorage.setItem("selectedDate",$(a))});const f=H(()=>$(n.value)),d=e(0);async function u(){i.value=await v(f.value),d.value=0}j(()=>{u()});const T=e("16:00"),w=16;e("21:00");const y=20;async function v(a){var m,p,g,S,b,h;const I=`${a} ${T.value}`,L="21:00",l=e([]),{data:r,error:R}=await F(`${D.public.apiBase}/public/events/${I}/${L}/field1,field2,field3`,{server:!0,method:"GET",headers:{"Content-Type":"application/json"}},"$TePJLbvDQX");if(R.value||!r.value)return[];for(let c=w;c<=y;c++)for(let C of[0,30]){const o=`${a} ${c.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}:00`,s={time:o,field1:null,field2:null,field3:null};(p=(m=r.value)==null?void 0:m.field1)==null||p.forEach(t=>{t.startTime===o&&(s.field1={team:t.team,trainer:t.trainer})}),(S=(g=r.value)==null?void 0:g.field2)==null||S.forEach(t=>{t.startTime===o&&(s.field2={team:t.team,trainer:t.trainer})}),(h=(b=r.value)==null?void 0:b.field3)==null||h.forEach(t=>{t.startTime===o&&(s.field3={team:t.team,trainer:t.trainer})}),l.value.push(s)}return i.value=l.value,l.value}return G(u,E.updateInterval*1e3),{reservations:i,isLoading:d,selectedDate:n,currentDate:f,getReservations:u,getPublicReservationsByDay:v}});export{k as u};
