import{d as b,v as L,c as H,o as O,g as k,a as D,w as E,i as R,f as x,s as G,r as I,j as K,l as F,x as z,D as j,u as N,n as V}from"./DqA0wvgn.js";import Q from"./Dq60U7H_.js";import{_ as W}from"./CGmoPu9p.js";import X from"./xJh7gdIs.js";import{t as Z}from"./iBF5vbor.js";import{u as q,s as P}from"./BAj6X1XV.js";import{u as M}from"./BPKLwf0D.js";import{u as $}from"./CWY8yeRe.js";const J={class:"container"},Y={class:"flex flex-col justify-center items-center gap-2 py-8"},ee=b({__name:"InvalidLogin",setup(m){const t=L();return t.forward(),(c,r)=>{const n=Q,B=G;return O(),H("div",J,[k("div",Y,[D(n,{severity:"error",icon:"pi pi-times-circle"},{default:E(()=>r[1]||(r[1]=[R("Sie müssen angemedet sein, um auf diese Seite zuzugreifen.")])),_:1}),D(B,{label:"Anmelden",icon:"pi pi-arrow-right",onClick:r[0]||(r[0]=l=>x(t).push("/login"))})])])}}}),ce=Object.assign(ee,{__name:"UiInvalidLogin"}),te=b({__name:"Date",props:{name:{type:String,default:""},inline:{type:Boolean,default:!1},showIcon:{type:String,default:"input",required:!1},minDate:{type:Date,default:null,required:!1},maxDate:{type:Date,default:null,required:!1},fluid:{type:Boolean,default:!0,required:!1},dateFormat:{type:String,default:"dd.mm.yy",required:!1},showOtherMonths:{type:Boolean,default:!0,required:!1},selectOtherMonths:{type:Boolean,default:!0,required:!1},defaultValue:{type:Date,default:null,required:!1},customDefaultValue:{type:[String,null],default:null,required:!1}},emits:["update:modelValue","update:isoDateString"],setup(m,{emit:t}){const c=m,r=t,n=I(c.defaultValue||(c.customDefaultValue?new Date(c.customDefaultValue):void 0)),B=l=>{n.value=l,l instanceof Date?(r("update:modelValue",l),r("update:isoDateString",Z(l))):(r("update:modelValue",void 0),r("update:isoDateString",""))};return(l,A)=>{const _=X,C=W;return O(),K(C,null,{default:E(()=>[k("div",null,[D(_,{showIcon:"",name:c.name,inline:c.inline,iconDisplay:c.showIcon,minDate:c.minDate,maxDate:c.maxDate,fluid:c.fluid,dateFormat:c.dateFormat,showOtherMonths:c.showOtherMonths,selectOtherMonths:c.selectOtherMonths,modelValue:x(n),"onUpdate:modelValue":A[0]||(A[0]=S=>B(S))},null,8,["name","inline","iconDisplay","minDate","maxDate","fluid","dateFormat","showOtherMonths","selectOtherMonths","modelValue"])])]),_:1})}}}),fe=Object.assign(te,{__name:"UiDate"}),ae=F("player",()=>{const m=N(),t=q(),c=M(),r=I([]),n=z();j(()=>{t.user.isAuthenticated&&B()});async function B(){var h;if(!t.user.isAuthenticated)return!1;const{data:e,error:d}=await $(`${m.public.apiBase}/players`,{server:!1,method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`}},"$NHdOiytVXZ");if(d.value){if(((h=d.value)==null?void 0:h.statusCode)===401){t.user.isAuthenticated=!1;return}console.error(d.value);return}return r.value=e.value?e.value:[],e.value?e.value:null}async function l(e){var T,a;if(!t.user.isAuthenticated)return!1;const{data:d,status:h,error:y}=await $(`${m.public.apiBase}/player/${e}`,{server:!1,method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`}},"$sLCh2Ry46c");if(((T=y.value)==null?void 0:T.statusCode)===401&&(t.user.isAuthenticated=!1),y.value){n.add({severity:"error",summary:"Fehler",detail:"Spieler konnte nicht geladen werden",life:3e3}),console.error(y.value);return}if(h.value==="success"&&d.value){const s=(a=r.value)==null?void 0:a.findIndex(i=>{var u;return i.userId===((u=d.value)==null?void 0:u.userId)});return s!==-1?r.value[s]={...r.value[s],...d.value}:r.value.push(d.value),d.value}}async function A(e){var T,a;if(!t.user.isAuthenticated)return!1;const{data:d,status:h,error:y}=await $(`${m.public.apiBase}/player`,{server:!1,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`},body:{firstname:e.firstname,lastname:e.lastname,dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth).toISOString().substring(0,10):null,placeOfBirth:e.placeOfBirth,street:e.street,house:e.house,plz:e.plz,place:e.place,team:e.team,mail:e.mail,phone:e.phone}},"$CvKh-jDD0z");if(((T=y.value)==null?void 0:T.statusCode)===401&&(t.user.isAuthenticated=!1),y.value){n.add({severity:"error",summary:"Fehler",detail:"Spieler konnte nicht erstellt werden",life:3e3}),console.error(y.value);return}if(h.value==="success"&&((a=d.value)!=null&&a.ID)){const s={...e,userId:d.value.ID};return r.value.push(s),n.add({severity:"success",summary:"Erfolgreich",detail:"Spieler erfolgreich erstellt",life:3e3}),s}}async function _(e){var T,a;if(!t.user.isAuthenticated)return!1;const{data:d,error:h,status:y}=await $(`${m.public.apiBase}/player/${e.userId}`,{server:!1,method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`},body:{firstname:e.firstname,lastname:e.lastname,dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth).toISOString().substring(0,10):null,placeOfBirth:e.placeOfBirth,street:e.street,house:e.house,plz:e.plz,place:e.place,team:e.team,mail:e.mail,phone:e.phone}},"$nNv6miqko2");if(((T=h.value)==null?void 0:T.statusCode)===401&&(t.user.isAuthenticated=!1),h.value&&n.add({severity:"error",summary:"Fehler",detail:"Spieler konnte nicht aktualisiert werden",life:3e3}),y.value==="success"){const s=(a=r.value)==null?void 0:a.findIndex(i=>i.userId===e.userId);s!==-1&&(r.value[s]={...r.value[s],...e}),n.add({severity:"success",summary:"Erfolgreich",detail:"Spieler erfolgreich aktualisiert",life:3e3})}return await B(),e}async function C(e){var y,T;if(!t.user.isAuthenticated)return!1;const{data:d,error:h}=await $(`${m.public.apiBase}/player/${e}`,{server:!1,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`}},"$-jhxLnql91");if(((y=h.value)==null?void 0:y.statusCode)===401&&(t.user.isAuthenticated=!1),h.value){n.add({severity:"error",summary:"Fehler",detail:"Spieler konnte nicht gelöscht werden",life:3e3}),console.error(h.value);return}n.add({severity:"success",summary:"Erfolgreich!",detail:"Spieler wurde erfolgreich gelöscht",life:3e3}),r.value=(T=r.value)==null?void 0:T.filter(a=>a.userId!==e)}const S=e=>r.value.filter(d=>d.team===e),w=V(()=>r.value.filter(e=>!e.team||e.team===null));return P(B,c.updateInterval*1e3),{players:r,fetchPlayers:B,getPlayerById:l,addPlayer:A,updatePlayer:_,deletePlayer:C,getPlayersByTeamName:S,playersWithoutTeam:w}}),me=F("team",()=>{const m=N(),t=q(),c=M(),r=ae(),n=I([]),B=I([]),l=z();j(()=>{t.user.isAuthenticated&&A()});async function A(){var i,u;if(!t.user.isAuthenticated)return!1;const{data:a,error:s}=await $(`${m.public.apiBase}/teams`,{server:!1,method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`}},"$c_vcSOBK_3");if(s.value){if(((i=s.value)==null?void 0:i.statusCode)===401){t.user.isAuthenticated=!1;return}return l.add({severity:"error",summary:"Fehler",detail:(u=s.value)==null?void 0:u.message,life:3e3}),null}return n.value=a.value?a.value:[],e(),a.value?a.value:null}async function _(a){var o,f;if(!t.user.isAuthenticated)return!1;const s=encodeURIComponent(a),{data:i,error:u}=await $(`${m.public.apiBase}/team/${s}`,{server:!1,method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`}},"$_v_N49IpHF");return((o=u.value)==null?void 0:o.statusCode)===401&&(t.user.isAuthenticated=!1),u.value?(l.add({severity:"error",summary:"Fehler",detail:(f=u.value)==null?void 0:f.message,life:3e3}),null):i.value?i.value:null}async function C(a){var o,f,g;if(!t.user.isAuthenticated)return!1;const{data:s,status:i,error:u}=await $(`${m.public.apiBase}/team`,{server:!1,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`},body:{teamName:a.teamName,type:a.type,needFields:a.needFields,trainer:a.trainer,coTrainer:a.coTrainer}},"$tnO8K-gvh7");if(((o=u.value)==null?void 0:o.statusCode)===401&&(t.user.isAuthenticated=!1),u.value)return l.add({severity:"error",summary:"Fehler",detail:(f=u.value)==null?void 0:f.message,life:3e3}),null;if(i.value==="success"){const v={...a};return(g=n.value)==null||g.push(v),l.add({severity:"success",summary:"Erfolg",detail:"Team erfolgreich erstellt",life:3e3}),v}return s.value?s.value:null}async function S(a,s){var f,g,v;if(!t.user.isAuthenticated)return!1;const{data:i,status:u,error:o}=await $(`${m.public.apiBase}/team/${encodeURIComponent(a)}`,{server:!1,method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`},body:{teamName:s.teamName,type:s.type,needFields:s.needFields,trainer:s.trainer,coTrainer:s.coTrainer}},"$MAAlU3Ca2V");if(((f=o.value)==null?void 0:f.statusCode)===401&&(t.user.isAuthenticated=!1),o.value)return l.add({severity:"error",summary:"Fehler beim Aktualisieren des Teams",detail:(g=o.value)==null?void 0:g.message,life:3e3}),null;if(u.value==="success"){const p=(v=n.value)==null?void 0:v.findIndex(U=>U.teamName===a);p&&p!==-1&&n.value&&(n.value[p]={...s}),l.add({severity:"success",summary:"Erfolg",detail:"Team erfolgreich aktualisiert",life:3e3})}return e(),i.value?i.value:null}async function w(a){var u,o,f,g;if(!t.user.isAuthenticated)return!1;const{data:s,error:i}=await $(`${m.public.apiBase}/team/${a}`,{server:!1,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`}},"$BQH4ifTbOM");if(((u=i.value)==null?void 0:u.statusCode)===401&&(t.user.isAuthenticated=!1),i.value)return l.add({severity:"error",summary:"Fehler beim Löschen des Teams",detail:(o=i.value)==null?void 0:o.message,life:3e3}),null;if(s.value){const v=(f=n.value)==null?void 0:f.findIndex(p=>p.teamName===a);v&&v!==-1&&((g=n.value)==null||g.splice(v,1))}return e(),s.value?s.value:null}function e(){n.value&&(B.value=n.value.map(a=>({label:a.teamName,value:a.teamName})))}const d=V(()=>{var a;return(a=n.value)==null?void 0:a.map(s=>({label:s.teamName,value:s.teamName}))});function h(a){return n.value?!n.value.some(s=>s.teamName===a):!0}async function y(a,s){var f,g,v;if(!t.user.isAuthenticated)return!1;const i=s.map(p=>p.userId),{data:u,error:o}=await $(`${m.public.apiBase}/team/${encodeURIComponent(a)}/players`,{server:!1,method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`},body:{players:i}},"$817gtFayHu");return((f=o.value)==null?void 0:f.statusCode)===401&&(t.user.isAuthenticated=!1),o.value?(l.add({severity:"error",summary:"Fehler beim Hinzufügen der Spieler",detail:(g=o.value)==null?void 0:g.message,life:3e3}),null):(((v=u.value)==null?void 0:v.status)==="success"&&l.add({severity:"success",summary:"Erfolg",detail:"Spieler erfolgreich hinzugefügt",life:3e3}),r.players.forEach(p=>{s.includes(p)&&(p.team=a)}),!0)}async function T(a,s){var f,g,v;if(!t.user.isAuthenticated)return!1;const i=s.map(p=>p.userId),{data:u,error:o}=await $(`${m.public.apiBase}/team/${encodeURIComponent(a)}/players`,{server:!1,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.user.token}`},body:{players:i}},"$n-GF5nnqw1");return((f=o.value)==null?void 0:f.statusCode)===401&&(t.user.isAuthenticated=!1),o.value?(l.add({severity:"error",summary:"Fehler beim Entfernen der Spieler",detail:(g=o.value)==null?void 0:g.message,life:3e3}),null):(((v=u.value)==null?void 0:v.status)==="success"&&l.add({severity:"success",summary:"Erfolg",detail:"Spieler erfolgreich entfernt",life:3e3}),r.players.forEach(p=>{s.includes(p)&&p.team===a&&(p.team="")}),!0)}return P(A,c.updateInterval*1e3),{teams:n,uniqueTeams:B,mappedTeams:d,fetchTeams:A,getTeamByName:_,addTeam:C,updateTeam:S,deleteTeam:w,isUniqueTeamName:h,addPlayerToTeam:y,removePlayerFromTeam:T}});export{fe as _,ce as a,ae as b,me as u};
